exports.id=342,exports.ids=[342],exports.modules={87012:(e,t,r)=>{Promise.resolve().then(r.bind(r,90254))},90254:(e,t,r)=>{"use strict";r.d(t,{default:()=>l});var n=r(97247),i=r(79906),s=r(34178),a=r(28964),o=r(9317);function l({userEmail:e,onLogout:t}){let r=(0,s.usePathname)()??"",l=(0,s.useRouter)(),{signout:j}=(0,o.a)(),[w,v]=(0,a.useState)(!1),[y,k]=(0,a.useState)(!1),[N,C]=(0,a.useState)(!1),_=(0,a.useCallback)(()=>v(!0),[]),S=(0,a.useCallback)(()=>v(!1),[]),A=(0,a.useCallback)(async()=>{let e=!1;try{if("function"==typeof j)console.log("[AdminSidebar] Attempting logout via useAuth().signout()..."),await j(),console.log("[AdminSidebar] Logout via useAuth() presumably successful."),e=!0;else{console.warn("[AdminSidebar] useAuth().signout() not available, attempting direct API call...");try{let t=process.env.NEXT_PUBLIC_API_URL||"http://localhost:4000",r=`${t}/api/admin/signout`;console.log(`[AdminSidebar] Calling fallback logout: POST ${r}`);let n=await fetch(r,{method:"POST",credentials:"include",headers:{}});if(!n.ok&&204!==n.status){let e=`Logout failed with status ${n.status}`;try{e=(await n.json()).message||e}catch{}throw console.error(`[AdminSidebar] Fallback logout API call failed: ${e}`),Error(e)}console.log("[AdminSidebar] Direct API call to /api/admin/signout successful."),e=!0}catch(e){console.error("[AdminSidebar] Fallback admin logout request failed:",e),alert(`Logout via API failed: ${e instanceof Error?e.message:"Unknown error"}`);return}}}catch(e){console.error("[AdminSidebar] Logout process error:",e),alert(`An error occurred during logout: ${e instanceof Error?e.message:"Unknown error"}`);return}if(e)try{console.log("[AdminSidebar] Logout successful, redirecting to /auth/signin..."),l.replace("/auth/signin")}catch(e){console.error("[AdminSidebar] Redirection failed after logout:",e),window.location.href="/auth/signin"}else console.warn("[AdminSidebar] Logout was not marked as successful, redirection skipped.")},[j,l]),R=(0,a.useCallback)(async()=>{try{k(!0),t?await t():await A()}catch(e){console.error("Logout failed:",e)}finally{k(!1)}},[t,A]),L=(0,a.useMemo)(()=>[{name:"Dashboard",path:"/admin",icon:h},{name:"Reports",path:"/admin/reports",icon:b},{name:"Tenders Management",path:"/admin/tenders",icon:x},{name:"Monetisasi (Plans)",path:"/admin/monet",icon:f},{name:"Payments (Midtrans)",path:"/admin/payments",icon:g}],[]),P=e=>"/admin"===e?r===e:r===e||r.startsWith(e+"/");function M({name:e,path:t,Icon:r}){let s=P(t);return n.jsx("li",{children:(0,n.jsxs)(i.default,{href:t,"aria-current":s?"page":void 0,className:["group relative flex items-center gap-3 rounded-xl px-3 py-2 text-sm transition","ring-0 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-amber-400/60",s?"bg-white/10 text-white shadow-[inset_0_1px_0_0_rgba(255,255,255,0.08)]":"text-white/85 hover:bg-white/8 hover:text-white"].join(" "),children:[n.jsx("span",{className:["absolute left-0 top-1/2 -translate-y-1/2 h-6 w-1 rounded-r-full",s?"bg-amber-400":"bg-transparent group-hover:bg-white/20"].join(" ")}),n.jsx(r,{className:"h-5 w-5 opacity-95"}),n.jsx("span",{className:"truncate",children:e})]})})}let O=(0,n.jsxs)("aside",{"aria-label":"Admin navigation",className:["hidden md:flex fixed left-0 top-0 z-40 h-screen flex-col border-r border-white/10","bg-[radial-gradient(1200px_600px_at_-200px_-200px,#1e3a8a_0%,#0b1736_40%,#0a1228_100%)] text-white","transition-[width] duration-300 ease-in-out",N?"w-20":"w-72"].join(" "),children:[(0,n.jsxs)("div",{className:"flex h-16 items-center px-3 border-b border-white/10/50",children:[n.jsx("button",{type:"button",onClick:()=>C(e=>!e),"aria-label":N?"Expand sidebar":"Collapse sidebar",className:"grid h-10 w-10 place-items-center rounded-xl border border-white/10 hover:bg-white/5 active:scale-95 transition",children:n.jsx(u,{className:"h-5 w-5 text-white"})}),!N&&(0,n.jsxs)("div",{className:"ml-3 leading-tight",children:[n.jsx("div",{className:"text-sm font-semibold",children:"Admin Panel"}),n.jsx("div",{className:"text-xs text-white/70",children:"ArkWork CMS"})]})]}),(0,n.jsxs)("nav",{className:"mt-2 flex-1 overflow-y-auto px-2",children:[n.jsx("p",{className:["px-3 text-[10px] uppercase tracking-wider text-white/50 mb-2",N?"opacity-0 pointer-events-none":"opacity-100"].join(" "),children:"Main"}),(0,n.jsxs)("ul",{className:"space-y-1",role:"list",children:[L.map(({name:e,path:t,icon:r})=>n.jsx(M,{name:e,path:t,Icon:r},t)),n.jsx("li",{children:(0,n.jsxs)("button",{type:"button",onClick:R,disabled:y,className:"group relative w-full flex items-center gap-3 rounded-xl px-3 py-2 text-sm transition text-left text-red-100 hover:bg-red-500/10 hover:text-white ring-0 focus-visible:ring-2 focus-visible:ring-red-400/60 disabled:opacity-60",children:[n.jsx("span",{className:"absolute left-0 top-1/2 -translate-y-1/2 h-6 w-1 rounded-r-full bg-transparent group-hover:bg-red-400"}),n.jsx(p,{className:"h-5 w-5"}),!N&&n.jsx("span",{className:"truncate",children:y?"Logging out…":"Logout"})]})})]})]}),(0,n.jsxs)("div",{className:"mt-auto border-t border-white/10 px-3 py-3",children:[(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"h-9 w-9 shrink-0 rounded-xl bg-white/10 grid place-items-center ring-1 ring-white/10",children:n.jsx(m,{className:"h-4 w-4"})}),!N&&(0,n.jsxs)("div",{className:"min-w-0 leading-tight",children:[n.jsx("div",{className:"text-xs font-semibold",children:"Administrator"}),n.jsx("div",{className:"text-[11px] text-white/60 truncate",children:e??"admin@arkwork.local"})]}),!N&&(0,n.jsxs)("button",{type:"button",onClick:R,disabled:y,className:"ml-auto inline-flex items-center gap-2 rounded-lg border border-white/10 px-2.5 py-1.5 text-xs hover:bg-white/10 active:scale-95 transition disabled:opacity-60","aria-label":"Logout",children:[n.jsx(p,{className:"h-3.5 w-3.5"}),n.jsx("span",{children:y?"Logging…":"Logout"})]})]}),(0,n.jsxs)("div",{className:["mt-3 text-[11px] text-white/60",N?"text-center":""].join(" "),children:["\xa9 ",new Date().getFullYear()," ArkWork Admin"]})]})]});return(0,n.jsxs)(n.Fragment,{children:[n.jsx("div",{className:"md:hidden sticky top-0 z-40 bg-white/90 backdrop-blur border-b border-neutral-200",children:(0,n.jsxs)("div",{className:"h-14 flex items-center justify-between px-3",children:[n.jsx("button",{type:"button",onClick:_,"aria-label":"Open menu",className:"grid h-10 w-10 place-items-center rounded-xl border border-neutral-200 text-neutral-700 active:scale-95",children:n.jsx(d,{className:"h-5 w-5"})}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"h-8 w-8 rounded-xl bg-blue-600 grid place-items-center shadow-sm",children:n.jsx(u,{className:"h-4 w-4 text-white"})}),n.jsx("div",{className:"text-sm font-semibold",children:"Admin Panel"})]}),n.jsx("div",{className:"w-10"})]})}),w&&n.jsx("div",{onClick:S,className:"fixed inset-0 z-50 md:hidden bg-black/40","aria-hidden":"true"}),n.jsx("aside",{role:"dialog","aria-modal":"true","aria-label":"Admin menu drawer",className:["fixed inset-y-0 left-0 z-50 w-[85%] max-w-[18rem] md:hidden","transform transition-transform duration-300 ease-out",w?"translate-x-0":"-translate-x-full"].join(" "),style:{visibility:w?"visible":"hidden"},children:(0,n.jsxs)("div",{className:"flex h-full flex-col bg-gradient-to-b from-blue-950 via-blue-900 to-blue-800 text-white shadow-2xl",children:[(0,n.jsxs)("div",{className:"flex h-14 items-center justify-between px-3 border-b border-white/10",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"h-8 w-8 rounded-xl bg-white/10 grid place-items-center",children:n.jsx(u,{className:"h-4 w-4 text-white"})}),n.jsx("div",{className:"text-sm font-semibold",children:"Admin Panel"})]}),n.jsx("button",{type:"button",onClick:S,"aria-label":"Close menu",className:"grid h-9 w-9 place-items-center rounded-xl border border-white/10 active:scale-95",children:n.jsx(c,{className:"h-5 w-5 text-white/90"})})]}),n.jsx("nav",{className:"flex-1 overflow-y-auto px-2",children:(0,n.jsxs)("ul",{className:"space-y-1",role:"list",children:[L.map(({name:e,path:t,icon:r})=>n.jsx("li",{children:(0,n.jsxs)(i.default,{href:t,"aria-current":P(t)?"page":void 0,className:["group relative flex items-center gap-3 rounded-xl px-3 py-3 text-[15px] transition",P(t)?"bg-white/10 text-white":"text-white/85 hover:bg-white/8 hover:text-white"].join(" "),onClick:()=>v(!1),children:[n.jsx("span",{className:["absolute left-0 top-1/2 -translate-y-1/2 h-6 w-1 rounded-r-full",P(t)?"bg-amber-400":"bg-transparent"].join(" ")}),n.jsx(r,{className:"h-5 w-5 opacity-95"}),n.jsx("span",{className:"truncate",children:e})]})},t)),n.jsx("li",{children:(0,n.jsxs)("button",{type:"button",onClick:async()=>{await R(),v(!1)},disabled:y,className:"group relative w-full flex items-center gap-3 rounded-xl px-3 py-3 text-[15px] transition text-left text-red-100 hover:bg-red-500/10 hover:text-white disabled:opacity-60",children:[n.jsx("span",{className:"absolute left-0 top-1/2 -translate-y-1/2 h-6 w-1 rounded-r-full bg-transparent group-hover:bg-red-400"}),n.jsx(p,{className:"h-5 w-5"}),n.jsx("span",{className:"truncate",children:y?"Logging out…":"Logout"})]})})]})}),(0,n.jsxs)("div",{className:"border-t border-white/10 px-4 py-3 text-xs text-white/70",children:["\xa9 ",new Date().getFullYear()," ArkWork Admin"]})]})}),O]})}function d(e){return n.jsx("svg",{viewBox:"0 0 24 24",fill:"none",...e,children:n.jsx("path",{d:"M4 7h16M4 12h16M4 17h16",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})})}function c(e){return n.jsx("svg",{viewBox:"0 0 24 24",fill:"none",...e,children:n.jsx("path",{d:"M6 6l12 12M6 18L18 6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})})}function u(e){return n.jsx("svg",{viewBox:"0 0 24 24",fill:"none",...e,children:n.jsx("path",{d:"M12 2l2.2 5.4L20 9l-5 3.8L16 20l-4-3-4 3 1-7.2L4 9l5.8-1.6L12 2Z",stroke:"currentColor",strokeWidth:"2",strokeLinejoin:"round"})})}function h(e){return n.jsx("svg",{viewBox:"0 0 24 24",fill:"none",...e,children:n.jsx("path",{d:"M3 10.5 12 3l9 7.5V21a1 1 0 0 1-1 1h-5v-6H9v6H4a1 1 0 0 1-1-1v-10.5Z",stroke:"currentColor",strokeWidth:"2",strokeLinejoin:"round"})})}function x(e){return(0,n.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",...e,children:[n.jsx("path",{d:"M12 3l8 4-8 4-8-4 8-4Z",stroke:"currentColor",strokeWidth:"2"}),n.jsx("path",{d:"M4 11l8 4 8-4",stroke:"currentColor",strokeWidth:"2"}),n.jsx("path",{d:"M4 15l8 4 8-4",stroke:"currentColor",strokeWidth:"2"})]})}function m(e){return(0,n.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",...e,children:[n.jsx("circle",{cx:"8",cy:"8",r:"3",stroke:"currentColor",strokeWidth:"2"}),n.jsx("circle",{cx:"16",cy:"11",r:"3",stroke:"currentColor",strokeWidth:"2"}),n.jsx("path",{d:"M3 20a5 5 0 0 1 7-4.6M14 20a5 5 0 0 1 5-4",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})]})}function p(e){return(0,n.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",...e,children:[n.jsx("path",{d:"M15 3H7a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h8",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),n.jsx("path",{d:"M10 12h10M17 9l3 3-3 3",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})}function f(e){return(0,n.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",...e,children:[n.jsx("rect",{x:"3",y:"5",width:"18",height:"14",rx:"2",stroke:"currentColor",strokeWidth:"2"}),n.jsx("circle",{cx:"12",cy:"12",r:"3",stroke:"currentColor",strokeWidth:"2"})]})}function g(e){return(0,n.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",...e,children:[n.jsx("rect",{x:"2",y:"5",width:"20",height:"14",rx:"2",stroke:"currentColor",strokeWidth:"2"}),n.jsx("path",{d:"M2 10h20",stroke:"currentColor",strokeWidth:"2"}),n.jsx("rect",{x:"6",y:"14",width:"6",height:"2",rx:"1",stroke:"currentColor",strokeWidth:"2"})]})}function b(e){return n.jsx("svg",{viewBox:"0 0 24 24",fill:"none",...e,children:n.jsx("path",{d:"M5 21V5m0 0h9l-1.5 3H19l-1.5 3H14l-1.5 3H5",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}},41288:(e,t,r)=>{"use strict";var n=r(71083);r.o(n,"redirect")&&r.d(t,{redirect:function(){return n.redirect}})},71083:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{ReadonlyURLSearchParams:function(){return a},RedirectType:function(){return n.RedirectType},notFound:function(){return i.notFound},permanentRedirect:function(){return n.permanentRedirect},redirect:function(){return n.redirect}});let n=r(1192),i=r(76868);class s extends Error{constructor(){super("Method unavailable on `ReadonlyURLSearchParams`. Read more: https://nextjs.org/docs/app/api-reference/functions/use-search-params#updating-searchparams")}}class a extends URLSearchParams{append(){throw new s}delete(){throw new s}set(){throw new s}sort(){throw new s}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},76868:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{isNotFoundError:function(){return i},notFound:function(){return n}});let r="NEXT_NOT_FOUND";function n(){let e=Error(r);throw e.digest=r,e}function i(e){return"object"==typeof e&&null!==e&&"digest"in e&&e.digest===r}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},83701:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"RedirectStatusCode",{enumerable:!0,get:function(){return r}}),function(e){e[e.SeeOther=303]="SeeOther",e[e.TemporaryRedirect=307]="TemporaryRedirect",e[e.PermanentRedirect=308]="PermanentRedirect"}(r||(r={})),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},1192:(e,t,r)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{RedirectType:function(){return n},getRedirectError:function(){return l},getRedirectStatusCodeFromError:function(){return m},getRedirectTypeFromError:function(){return x},getURLFromRedirectError:function(){return h},isRedirectError:function(){return u},permanentRedirect:function(){return c},redirect:function(){return d}});let i=r(54580),s=r(72934),a=r(83701),o="NEXT_REDIRECT";function l(e,t,r){void 0===r&&(r=a.RedirectStatusCode.TemporaryRedirect);let n=Error(o);n.digest=o+";"+t+";"+e+";"+r+";";let s=i.requestAsyncStorage.getStore();return s&&(n.mutableCookies=s.mutableCookies),n}function d(e,t){void 0===t&&(t="replace");let r=s.actionAsyncStorage.getStore();throw l(e,t,(null==r?void 0:r.isAction)?a.RedirectStatusCode.SeeOther:a.RedirectStatusCode.TemporaryRedirect)}function c(e,t){void 0===t&&(t="replace");let r=s.actionAsyncStorage.getStore();throw l(e,t,(null==r?void 0:r.isAction)?a.RedirectStatusCode.SeeOther:a.RedirectStatusCode.PermanentRedirect)}function u(e){if("object"!=typeof e||null===e||!("digest"in e)||"string"!=typeof e.digest)return!1;let[t,r,n,i]=e.digest.split(";",4),s=Number(i);return t===o&&("replace"===r||"push"===r)&&"string"==typeof n&&!isNaN(s)&&s in a.RedirectStatusCode}function h(e){return u(e)?e.digest.split(";",3)[2]:null}function x(e){if(!u(e))throw Error("Not a redirect error");return e.digest.split(";",2)[1]}function m(e){if(!u(e))throw Error("Not a redirect error");return Number(e.digest.split(";",4)[3])}(function(e){e.push="push",e.replace="replace"})(n||(n={})),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},76630:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c,metadata:()=>o});var n=r(72051);r(26269);let i=(0,r(45347).createProxy)(String.raw`D:\tugas\magang\frontend-arkwork1\src\app\admin\(protected)\components\AdminSidebar.tsx#default`);var s=r(41288),a=r(52845);let o={title:"Admin | ArkWork"},l=process.env.NEXT_PUBLIC_API_BASE||process.env.NEXT_PUBLIC_API_URL||"http://localhost:4000";async function d(){try{let e=(0,a.cookies)().toString(),t=await fetch(`${l}/api/admin/me`,{method:"GET",headers:{cookie:e,accept:"application/json"},cache:"no-store"});return 200===t.status}catch(e){return console.error("[admin/layout] verifyAdminServerSide error:",e),!1}}async function c({children:e}){let t=(function(){try{let e=(0,a.headers)(),t=e.get("x-invoke-pathname");if(t)return String(t);let r=e.get("x-pathname");if(r)return String(r);let n=e.get("referer");if(n)try{return new URL(n).pathname||""}catch{}return""}catch(e){return""}})().replace(/\/+$/,"")||"";return"/admin/login"===t||"/admin/login/"===t?n.jsx(n.Fragment,{children:e}):(await d()||(0,s.redirect)("/admin/login"),(0,n.jsxs)("div",{className:"min-h-screen bg-neutral-50",children:[n.jsx(i,{}),(0,n.jsxs)("div",{className:"md:pl-72",children:[n.jsx("header",{className:"sticky top-0 z-30 bg-white/80 backdrop-blur border-b border-neutral-200",children:n.jsx("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 h-16 flex items-center",children:n.jsx("h1",{className:"text-lg font-semibold text-neutral-900",children:"Admin Dashboard"})})}),n.jsx("main",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 py-6",children:e})]})]}))}}};