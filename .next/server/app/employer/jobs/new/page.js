(()=>{var e={};e.id=997,e.ids=[997],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},49411:e=>{"use strict";e.exports=require("node:path")},97742:e=>{"use strict";e.exports=require("node:process")},41041:e=>{"use strict";e.exports=require("node:url")},33709:(e,s,a)=>{"use strict";a.r(s),a.d(s,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>c,routeModule:()=>p,tree:()=>d}),a(63214),a(55512),a(90996);var t=a(30170),l=a(45002),r=a(83876),n=a.n(r),i=a(66299),o={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);a.d(s,o);let d=["",{children:["employer",{children:["jobs",{children:["new",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,63214)),"D:\\tugas\\magang\\frontend-arkwork1\\src\\app\\employer\\jobs\\new\\page.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,55512)),"D:\\tugas\\magang\\frontend-arkwork1\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,90996,23)),"next/dist/client/components/not-found-error"]}],c=["D:\\tugas\\magang\\frontend-arkwork1\\src\\app\\employer\\jobs\\new\\page.tsx"],x="/employer/jobs/new/page",m={require:a,loadChunk:()=>Promise.resolve()},p=new t.AppPageRouteModule({definition:{kind:l.x.APP_PAGE,page:"/employer/jobs/new/page",pathname:"/employer/jobs/new",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},77005:(e,s,a)=>{Promise.resolve().then(a.bind(a,49711))},49711:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>c});var t=a(97247),l=a(28964),r=a(34178);let n=process.env.NEXT_PUBLIC_API_BASE||process.env.NEXT_PUBLIC_API_URL||"http://localhost:4000",i=e=>String(e??"").replace(/[^\d]/g,""),o=e=>{let s=Number(i(e??""));return Number.isFinite(s)&&""!==String(e??"").trim()?s:null},d=e=>i(e).replace(/\B(?=(\d{3})+(?!\d))/g,",");function c(){let e=(0,r.useRouter)(),s=(0,r.useSearchParams)().get("id"),[a,c]=(0,l.useState)(!1),[x,m]=(0,l.useState)(null),[p,u]=(0,l.useState)(null),[b,h]=(0,l.useState)(""),[g,j]=(0,l.useState)(""),[y,N]=(0,l.useState)(""),[v,f]=(0,l.useState)(""),[k,w]=(0,l.useState)([]),[S,P]=(0,l.useState)([]),[C,M]=(0,l.useState)({title:"",location:"",employment:"Full-time",description:"",isDraft:!1,remote:!1,salaryMin:"",salaryMax:"",currency:"IDR",deadline:"",tags:"",requirements:"",experienceMinYears:"",education:""}),_=(e,s)=>M(a=>({...a,[e]:s}));async function D(e){if(e.preventDefault(),!b){u({type:"err",msg:"Tidak menemukan employer yang login. Silakan login sebagai employer."});return}if(!g.trim()){u({type:"err",msg:"Profil perusahaan belum lengkap (nama perusahaan)."});return}if(!C.title.trim()){u({type:"err",msg:"Judul lowongan wajib diisi."});return}if(!y||!v){u({type:"err",msg:"Pilih Provinsi dan Kab/Kota."});return}c(!0),u(null);try{let e={title:C.title.trim(),location:C.location,employment:C.employment,description:C.description,isDraft:C.isDraft,experienceMinYears:o(C.experienceMinYears),education:C.education||null,salaryMin:o(C.salaryMin),salaryMax:o(C.salaryMax),currency:C.currency,tags:C.tags.split(",").map(e=>e.trim()).filter(Boolean),remoteMode:C.remote?"REMOTE":"ON_SITE",company:g,deadline:C.deadline||null,requirements:C.requirements},s=await fetch(`${n.replace(/\/+$/,"")}/api/employer/jobs`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({...e,employerId:b})}),a=await s.json().catch(()=>({}));if(!s.ok||!a?.ok){let e=a?.error||`HTTP ${s.status}`;m(`Tersimpan lokal. Gagal menyimpan ke server: ${e}`);return}m("Job berhasil dipublikasikan.")}catch(e){m(e?.message==="Failed to fetch"?"Gagal terhubung ke server. Periksa BACKEND & NEXT_PUBLIC_API_BASE.":e?.message||"Gagal menyimpan.")}finally{c(!1)}}return(0,t.jsxs)("main",{className:"min-h-[60vh] bg-slate-50",children:[(0,t.jsxs)("div",{className:"mx-auto max-w-3xl px-4 py-8",children:[t.jsx("h1",{className:"text-2xl font-semibold text-slate-900",children:s?"Edit Job":"Post a Job"}),t.jsx("p",{className:"mt-1 text-sm text-slate-600",children:"Isi detail lowongan. Nama perusahaan otomatis dari profil employer."}),(0,t.jsxs)("form",{onSubmit:D,className:"mt-6 space-y-5 rounded-2xl border border-slate-200 bg-white p-6 shadow-sm",children:[(0,t.jsxs)("div",{className:"grid gap-4 sm:grid-cols-[1fr,2fr] items-end",children:[(0,t.jsxs)("div",{children:[t.jsx("div",{className:"text-xs text-slate-600 mb-1",children:"Company"}),t.jsx("div",{className:"inline-flex max-w-full items-center gap-2 rounded-xl border border-slate-300 bg-slate-50 px-3 py-2 text-sm",children:t.jsx("span",{className:"truncate font-medium",children:g||"—"})}),!g&&t.jsx("div",{className:"mt-1 text-xs text-amber-600",children:"Nama perusahaan belum terbaca—pastikan sudah login sebagai employer."})]}),(0,t.jsxs)("label",{className:"block",children:[t.jsx("span",{className:"mb-1 block text-xs text-slate-600",children:"Job Title"}),t.jsx("input",{value:C.title,onChange:e=>_("title",e.target.value),required:!0,className:"w-full rounded-xl border border-slate-300 px-3 py-2 text-sm",placeholder:"Frontend Engineer"})]})]}),(0,t.jsxs)("div",{className:"grid gap-4 sm:grid-cols-3",children:[(0,t.jsxs)("label",{className:"block",children:[t.jsx("span",{className:"mb-1 block text-xs text-slate-600",children:"Provinsi"}),(0,t.jsxs)("select",{value:y,onChange:e=>N(e.target.value),className:"w-full rounded-xl border border-slate-300 px-3 py-2 text-sm",children:[t.jsx("option",{value:"",children:"-- pilih --"}),k.map(e=>t.jsx("option",{value:e.id,children:e.name},e.id))]})]}),(0,t.jsxs)("label",{className:"block",children:[t.jsx("span",{className:"mb-1 block text-xs text-slate-600",children:"Kab/Kota"}),(0,t.jsxs)("select",{value:v,onChange:e=>f(e.target.value),className:"w-full rounded-xl border border-slate-300 px-3 py-2 text-sm",disabled:!y,children:[t.jsx("option",{value:"",children:"-- pilih --"}),S.map(e=>t.jsx("option",{value:e.id,children:e.name},e.id))]})]}),(0,t.jsxs)("label",{className:"block",children:[t.jsx("span",{className:"mb-1 block text-xs text-slate-600",children:"Location (gabungan)"}),t.jsx("input",{value:C.location,readOnly:!0,className:"w-full rounded-xl border border-slate-300 bg-slate-100 px-3 py-2 text-sm",placeholder:"Kab/Kota, Provinsi"})]})]}),(0,t.jsxs)("div",{className:"grid gap-4 sm:grid-cols-3",children:[(0,t.jsxs)("label",{className:"block",children:[t.jsx("span",{className:"mb-1 block text-xs text-slate-600",children:"Employment"}),(0,t.jsxs)("select",{value:C.employment,onChange:e=>_("employment",e.target.value),className:"w-full rounded-xl border border-slate-300 px-3 py-2 text-sm",children:[t.jsx("option",{children:"Full-time"}),t.jsx("option",{children:"Part-time"}),t.jsx("option",{children:"Contract"}),t.jsx("option",{children:"Internship"})]})]}),(0,t.jsxs)("label",{className:"block",children:[t.jsx("span",{className:"mb-1 block text-xs text-slate-600",children:"Currency"}),(0,t.jsxs)("select",{value:C.currency,onChange:e=>_("currency",e.target.value),className:"w-full rounded-xl border border-slate-300 px-3 py-2 text-sm",children:[t.jsx("option",{children:"IDR"}),t.jsx("option",{children:"USD"})]})]}),(0,t.jsxs)("label",{className:"mt-6 inline-flex items-center gap-2 text-sm text-slate-700",children:[t.jsx("input",{type:"checkbox",checked:C.remote,onChange:e=>_("remote",e.target.checked),className:"h-4 w-4 rounded border-slate-300 text-blue-600"}),"Remote-friendly"]})]}),(0,t.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,t.jsxs)("label",{className:"block",children:[t.jsx("span",{className:"mb-1 block text-xs text-slate-600",children:"Salary Min"}),t.jsx("input",{value:C.salaryMin,onChange:e=>_("salaryMin",d(e.target.value)),inputMode:"numeric",className:"w-full rounded-xl border border-slate-300 px-3 py-2 text-sm",placeholder:"10,000,000"})]}),(0,t.jsxs)("label",{className:"block",children:[t.jsx("span",{className:"mb-1 block text-xs text-slate-600",children:"Salary Max"}),t.jsx("input",{value:C.salaryMax,onChange:e=>_("salaryMax",d(e.target.value)),inputMode:"numeric",className:"w-full rounded-xl border border-slate-300 px-3 py-2 text-sm",placeholder:"20,000,000"})]})]}),(0,t.jsxs)("div",{className:"grid gap-4 sm:grid-cols-3",children:[(0,t.jsxs)("label",{className:"block",children:[t.jsx("span",{className:"mb-1 block text-xs text-slate-600",children:"Min Experience (years)"}),t.jsx("input",{value:C.experienceMinYears,onChange:e=>_("experienceMinYears",i(e.target.value)),inputMode:"numeric",className:"w-full rounded-xl border border-slate-300 px-3 py-2 text-sm",placeholder:"0"})]}),(0,t.jsxs)("label",{className:"block",children:[t.jsx("span",{className:"mb-1 block text-xs text-slate-600",children:"Education"}),(0,t.jsxs)("select",{value:C.education,onChange:e=>_("education",e.target.value),className:"w-full rounded-xl border border-slate-300 px-3 py-2 text-sm",children:[t.jsx("option",{value:"",children:"Any"}),t.jsx("option",{value:"SMA/SMK",children:"SMA/SMK"}),t.jsx("option",{value:"D3",children:"D3"}),t.jsx("option",{value:"S1",children:"S1"}),t.jsx("option",{value:"S2",children:"S2"}),t.jsx("option",{value:"S3",children:"S3"})]})]}),(0,t.jsxs)("label",{className:"block",children:[t.jsx("span",{className:"mb-1 block text-xs text-slate-600",children:"Deadline"}),t.jsx("input",{type:"date",value:C.deadline,onChange:e=>_("deadline",e.target.value),className:"w-full rounded-xl border border-slate-300 px-3 py-2 text-sm"})]})]}),(0,t.jsxs)("label",{className:"block",children:[t.jsx("span",{className:"mb-1 block text-xs text-slate-600",children:"Tags (comma separated)"}),t.jsx("input",{value:C.tags,onChange:e=>_("tags",e.target.value),className:"w-full rounded-xl border border-slate-300 px-3 py-2 text-sm",placeholder:"react, nextjs, tailwind"})]}),(0,t.jsxs)("label",{className:"block",children:[t.jsx("span",{className:"mb-1 block text-xs text-slate-600",children:"Description"}),t.jsx("textarea",{value:C.description,onChange:e=>_("description",e.target.value),rows:5,className:"w-full rounded-xl border border-slate-300 px-3 py-2 text-sm",placeholder:"Describe the role…"})]}),(0,t.jsxs)("label",{className:"block",children:[t.jsx("span",{className:"mb-1 block text-xs text-slate-600",children:"Requirements"}),t.jsx("textarea",{value:C.requirements,onChange:e=>_("requirements",e.target.value),rows:5,className:"w-full rounded-xl border border-slate-300 px-3 py-2 text-sm",placeholder:"- 3+ years…"})]}),(0,t.jsxs)("label",{className:"inline-flex items-center gap-2 text-sm text-slate-700",children:[t.jsx("input",{type:"checkbox",checked:C.isDraft,onChange:e=>_("isDraft",e.target.checked),className:"h-4 w-4 rounded border-slate-300 text-blue-600"}),"Save as draft (server)"]}),(0,t.jsxs)("div",{className:"flex items-center justify-end gap-3",children:[t.jsx("button",{type:"button",onClick:()=>history.back(),className:"rounded-xl border border-slate-200 px-4 py-2 text-sm text-slate-700 hover:bg-slate-50",children:"Cancel"}),t.jsx("button",{type:"submit",disabled:a,className:"rounded-xl bg-blue-600 px-4 py-2 text-sm font-semibold text-white hover:bg-blue-700 disabled:opacity-60",children:a?"Publishing…":"Publish Job"})]})]})]}),p&&t.jsx("div",{className:"fixed inset-x-0 bottom-6 z-[60] flex justify-center px-4",children:t.jsx("div",{className:`pointer-events-auto w-full max-w-md rounded-2xl border p-4 shadow-2xl backdrop-blur ${"ok"===p.type?"border-emerald-200 bg-emerald-50 text-emerald-900":"border-rose-200 bg-rose-50 text-rose-900"}`,children:(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[t.jsx("div",{className:"grid h-6 w-6 place-items-center rounded-full bg-black/10",children:"ok"===p.type?"✓":"!"}),t.jsx("div",{className:"flex-1 text-sm",children:p.msg}),t.jsx("button",{onClick:()=>u(null),className:"rounded-lg border px-2 text-xs hover:bg-white/50",children:"Close"})]})})}),x&&t.jsx("div",{className:"fixed inset-0 z-50 grid place-items-center bg-black/40 p-4",children:(0,t.jsxs)("div",{className:"w-full max-w-sm rounded-2xl bg-white p-6 shadow-xl",children:[t.jsx("h2",{className:"text-center text-lg font-semibold text-slate-900",children:"Berhasil"}),t.jsx("p",{className:"mt-2 whitespace-pre-line text-center text-sm text-slate-600",children:x}),t.jsx("div",{className:"mt-5",children:t.jsx("button",{onClick:()=>{m(null),e.push("/jobs")},className:"w-full rounded-lg bg-slate-900 px-4 py-2 text-sm font-medium text-white hover:bg-slate-800",children:"Oke"})})]})})]})}},63214:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>t});let t=(0,a(45347).createProxy)(String.raw`D:\tugas\magang\frontend-arkwork1\src\app\employer\jobs\new\page.tsx#default`)}};var s=require("../../../../webpack-runtime.js");s.C(e);var a=e=>s(s.s=e),t=s.X(0,[285,59,785],()=>a(33709));module.exports=t})();