(()=>{var e={};e.id=23,e.ids=[23],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},49411:e=>{"use strict";e.exports=require("node:path")},97742:e=>{"use strict";e.exports=require("node:process")},41041:e=>{"use strict";e.exports=require("node:url")},47645:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>p,pages:()=>c,routeModule:()=>x,tree:()=>d}),s(29513),s(55512),s(90996);var a=s(30170),r=s(45002),l=s(83876),n=s.n(l),i=s(66299),o={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);s.d(t,o);let d=["",{children:["employer",{children:["jobs",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,29513)),"D:\\tugas\\magang\\frontend-arkwork1\\src\\app\\employer\\jobs\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,55512)),"D:\\tugas\\magang\\frontend-arkwork1\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,90996,23)),"next/dist/client/components/not-found-error"]}],c=["D:\\tugas\\magang\\frontend-arkwork1\\src\\app\\employer\\jobs\\page.tsx"],p="/employer/jobs/page",m={require:s,loadChunk:()=>Promise.resolve()},x=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/employer/jobs/page",pathname:"/employer/jobs",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},47111:(e,t,s)=>{Promise.resolve().then(s.bind(s,72359))},72359:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>m});var a=s(97247),r=s(79906),l=s(28964),n=s(79772),i=s(31473);let o=process.env.NEXT_PUBLIC_API_BASE?.replace(/\/+$/,"")||"http://localhost:4000",d={LIST:()=>`${o}/api/employer-jobs`,TOGGLE:e=>`${o}/api/employer-jobs/${e}`,DELETE:e=>`${o}/api/employer-jobs/${e}`};async function c(e,t){let s=await fetch(e,{...t,headers:{"Content-Type":"application/json",...t?.headers||{}},cache:"no-store",credentials:"include"});if(!s.ok)throw Error(await s.text().catch(()=>"")||`HTTP ${s.status}`);return s.json()}function p(e){let t=(e.employment||"full_time").toLowerCase();return{id:e.id,title:e.title,company:e.company,location:e.location||"",type:"full_time"===t||"part_time"===t||"contract"===t||"internship"===t?t:"full_time",description:e.description||"",postedAt:e.postedAt,status:e.isActive?"active":"closed",logo:e.logoUrl}}function m(){let[e,t]=(0,l.useState)([]),[s,o]=(0,l.useState)(!0),[m,x]=(0,l.useState)(null),[u,h]=(0,l.useState)(null);async function b(){o(!0);try{let e=await c(d.LIST());t((e?.data||[]).map(p))}catch(e){h(e?.message||"Gagal memuat data")}o(!1)}async function g(t){let s=e.find(e=>String(e.id)===String(t)),a=(s?.status??"active")==="active"?"INACTIVE":"ACTIVE";try{await c(d.TOGGLE(t),{method:"PATCH",body:JSON.stringify({status:a})}),await b(),x("Status berhasil diperbarui.")}catch(e){h(e?.message||"Gagal mengubah status")}}async function j(e,t,s){try{await c(d.DELETE(e),{method:"DELETE"}),await b(),x("Job berhasil dihapus.")}catch(e){h(e?.message||"Gagal menghapus job")}}async function y(){try{let t=e.map(e=>e.id);await Promise.allSettled(t.map(e=>c(d.DELETE(e),{method:"DELETE"}))),await b(),x("Semua job berhasil dihapus.")}catch(e){h(e?.message||"Gagal menghapus semua job")}}let f=(0,l.useMemo)(()=>[...e].sort((e,t)=>{let s=new Date(e.postedAt??0).getTime();return new Date(t.postedAt??0).getTime()-s}),[e]);return(0,a.jsxs)(a.Fragment,{children:[a.jsx(n.default,{}),a.jsx("main",{className:"min-h-[60vh] bg-slate-50",children:(0,a.jsxs)("div",{className:"mx-auto max-w-6xl px-4 py-8",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h1",{className:"text-2xl font-semibold text-slate-900",children:"Jobs"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[a.jsx(r.default,{href:"/employer/jobs/new",className:"rounded-xl bg-blue-600 px-4 py-2 text-sm font-semibold text-white hover:bg-blue-700",children:"Post a Job"}),a.jsx("button",{onClick:y,className:"rounded-xl border border-rose-200 bg-rose-50 px-4 py-2 text-sm font-semibold text-rose-700 hover:bg-rose-100 disabled:opacity-50",disabled:s||0===e.length,children:"Hapus Semua"})]})]}),m&&a.jsx("div",{className:"mb-4 rounded-xl border border-emerald-200 bg-emerald-50 px-4 py-3 text-emerald-800",children:(0,a.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[a.jsx("span",{children:m}),a.jsx("button",{onClick:()=>x(null),className:"text-sm underline underline-offset-2",children:"Tutup"})]})}),u&&a.jsx("div",{className:"mb-4 rounded-xl border border-rose-200 bg-rose-50 px-4 py-3 text-rose-800",children:(0,a.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[a.jsx("span",{children:u}),a.jsx("button",{onClick:()=>h(null),className:"text-sm underline underline-offset-2",children:"Tutup"})]})}),a.jsx("div",{className:"overflow-hidden rounded-2xl border border-slate-200 bg-white shadow-sm",children:(0,a.jsxs)("table",{className:"w-full text-sm",children:[a.jsx("thead",{className:"bg-slate-50 text-slate-600",children:(0,a.jsxs)("tr",{children:[a.jsx("th",{className:"px-4 py-3 text-left",children:"Posisi"}),a.jsx("th",{className:"px-4 py-3 text-left",children:"Perusahaan"}),a.jsx("th",{className:"px-4 py-3 text-left",children:"Lokasi"}),a.jsx("th",{className:"px-4 py-3 text-left",children:"Tipe"}),a.jsx("th",{className:"px-4 py-3 text-left",children:"Status"}),a.jsx("th",{className:"px-4 py-3 text-left",children:"Diposting"}),a.jsx("th",{className:"px-4 py-3"})]})}),(0,a.jsxs)("tbody",{children:[s&&a.jsx("tr",{children:a.jsx("td",{colSpan:7,className:"px-4 py-8 text-center text-slate-600",children:"Memuat dataâ€¦"})}),!s&&0===f.length&&a.jsx("tr",{children:a.jsx("td",{colSpan:7,className:"px-4 py-8 text-center text-slate-600",children:"Belum ada lowongan. Klik Post a Job."})}),!s&&f.map(e=>(0,a.jsxs)("tr",{className:"border-b last:border-0",children:[a.jsx("td",{className:"px-4 py-3",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"grid h-10 w-10 rounded-xl bg-gradient-to-tr from-blue-600 via-blue-500 to-amber-400 text-white font-bold place-items-center overflow-hidden",children:e.logo?a.jsx("img",{src:e.logo,alt:e.company,className:"h-full w-full object-cover"}):function(e){let t=e?.trim().split(/\s+/)||[];return 0===t.length?"AW":1===t.length?t[0].slice(0,2).toUpperCase():(t[0][0]+t[1][0]).toUpperCase()}(e.company)}),a.jsx("div",{className:"font-medium text-slate-900",children:e.title})]})}),a.jsx("td",{className:"px-4 py-3",children:e.company}),a.jsx("td",{className:"px-4 py-3",children:e.location}),a.jsx("td",{className:"px-4 py-3",children:e.type.replace("_","-").replace(/\b\w/g,e=>e.toUpperCase())}),a.jsx("td",{className:"px-4 py-3",children:a.jsx("span",{className:`inline-flex items-center rounded-full px-2.5 py-1 text-xs font-medium ${"active"===e.status?"bg-emerald-50 text-emerald-700 ring-emerald-200":"bg-slate-100 text-slate-700 ring-slate-200"} ring-1 ring-inset`,children:"active"===e.status?"Active":"Closed"})}),a.jsx("td",{className:"px-4 py-3",children:e.postedAt?new Date(e.postedAt).toLocaleDateString():"-"}),a.jsx("td",{className:"px-4 py-3",children:(0,a.jsxs)("div",{className:"flex gap-2",children:[a.jsx(r.default,{href:`/employer/jobs/new?id=${e.id}`,className:"rounded-lg border border-slate-200 px-3 py-1.5 hover:bg-slate-50",children:"Edit"}),a.jsx("button",{onClick:()=>g(e.id),className:"rounded-lg border border-slate-200 px-3 py-1.5 hover:bg-slate-50 disabled:opacity-50",disabled:s,children:"active"===e.status?"Tutup":"Buka"}),a.jsx("button",{onClick:()=>j(e.id,e.title,e.company),className:"rounded-lg border border-rose-200 bg-rose-50 px-3 py-1.5 text-rose-700 hover:bg-rose-100 disabled:opacity-50",disabled:s,children:"Hapus"})]})})]},e.id))]})]})})]})}),a.jsx(i.default,{})]})}},29513:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});let a=(0,s(45347).createProxy)(String.raw`D:\tugas\magang\frontend-arkwork1\src\app\employer\jobs\page.tsx#default`)}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[285,59,785],()=>s(47645));module.exports=a})();