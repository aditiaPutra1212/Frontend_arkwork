(()=>{var e={};e.id=564,e.ids=[564],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},49411:e=>{"use strict";e.exports=require("node:path")},97742:e=>{"use strict";e.exports=require("node:process")},41041:e=>{"use strict";e.exports=require("node:url")},64998:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>i.a,__next_app__:()=>x,originalPathname:()=>p,pages:()=>c,routeModule:()=>m,tree:()=>o}),a(6331),a(55512),a(90996);var s=a(30170),r=a(45002),l=a(83876),i=a.n(l),n=a(66299),d={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);a.d(t,d);let o=["",{children:["employer",{children:["applications",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,6331)),"D:\\tugas\\magang\\frontend-arkwork1\\src\\app\\employer\\applications\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,55512)),"D:\\tugas\\magang\\frontend-arkwork1\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,90996,23)),"next/dist/client/components/not-found-error"]}],c=["D:\\tugas\\magang\\frontend-arkwork1\\src\\app\\employer\\applications\\page.tsx"],p="/employer/applications/page",x={require:a,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/employer/applications/page",pathname:"/employer/applications",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},31912:(e,t,a)=>{Promise.resolve().then(a.bind(a,82184))},82184:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>c});var s=a(97247),r=a(28964),l=a(79772),i=a(31473);let n=process.env.NEXT_PUBLIC_API_BASE||process.env.NEXT_PUBLIC_API_URL||"http://localhost:4000",d={submitted:0,rejected:0,hired:0},o=["submitted","rejected","hired"];function c(){let[e,t]=(0,r.useState)([]),[a,c]=(0,r.useState)(d),[p,x]=(0,r.useState)(null),[m,u]=(0,r.useState)(!0),[h,b]=(0,r.useState)({}),g=e=>{if(!e)return"-";let t=new Date(e);return isNaN(t.getTime())?"-":t.toLocaleDateString(void 0,{day:"2-digit",month:"short",year:"numeric"})},j=e=>{if(!e)return"#";let t=(n||"").replace(/\/+$/,"");return/^https?:\/\//i.test(e)?e:`${t}${e.startsWith("/")?"":"/"}${e}`},y=e=>{let t={...d};for(let a of e){let e=a.status;o.includes(e)&&(t[e]+=1)}return t},N=async(a,s)=>{let r=(n||"").replace(/\/+$/,""),l=localStorage.getItem("ark_employer_id")||"",i=e.map(e=>e.id===a?{...e,status:s}:e);t(i),c(y(i)),b(e=>({...e,[a]:!0})),x(null);try{let e=await fetch(`${r}/api/employers/applications/${a}`,{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json","X-Employer-Id":l},body:JSON.stringify({status:s})});if(!e.ok){let t=await e.json().catch(()=>({}));throw Error(t?.error||`HTTP ${e.status}`)}}catch(a){t(e),c(y(e)),x(a?.message||"Gagal memperbarui status")}finally{b(e=>({...e,[a]:!1}))}},f=e=>{confirm(`Terima pelamar "${e.candidateName}" untuk posisi ${e.jobTitle}?`)&&N(e.id,"hired")},v=e=>{confirm(`Tolak pelamar "${e.candidateName}" untuk posisi ${e.jobTitle}?`)&&N(e.id,"rejected")};return(0,s.jsxs)(s.Fragment,{children:[s.jsx(l.default,{}),s.jsx("main",{className:"min-h-[60vh] bg-slate-50",children:(0,s.jsxs)("div",{className:"mx-auto max-w-6xl px-4 py-8",children:[s.jsx("h1",{className:"mb-2 text-2xl font-semibold text-slate-900",children:"Applications"}),s.jsx("p",{className:"mb-6 text-sm text-slate-600",children:"Semua pelamar dari lowongan perusahaan Anda."}),s.jsx("div",{className:"mb-6 grid gap-3 sm:grid-cols-2 lg:grid-cols-3",children:[{label:"SUBMITTED",val:a.submitted},{label:"REJECTED",val:a.rejected},{label:"HIRED",val:a.hired}].map(e=>(0,s.jsxs)("div",{className:"rounded-2xl border border-slate-200 bg-white p-4",children:[s.jsx("div",{className:"text-xs font-medium text-slate-500",children:e.label}),s.jsx("div",{className:"mt-1 text-2xl font-semibold text-slate-900",children:e.val})]},e.label))}),s.jsx("div",{className:"overflow-hidden rounded-2xl border border-slate-200 bg-white shadow-sm",children:(0,s.jsxs)("table",{className:"w-full text-left text-sm",children:[s.jsx("thead",{className:"border-b border-slate-200 bg-slate-50 text-slate-600",children:(0,s.jsxs)("tr",{children:[s.jsx("th",{className:"px-4 py-3",children:"Candidate"}),s.jsx("th",{className:"px-4 py-3",children:"Email"}),s.jsx("th",{className:"px-4 py-3",children:"Job"}),s.jsx("th",{className:"px-4 py-3",children:"Status"}),s.jsx("th",{className:"px-4 py-3",children:"Date"}),s.jsx("th",{className:"px-4 py-3",children:"CV"}),s.jsx("th",{className:"px-4 py-3",children:"Actions"})]})}),(0,s.jsxs)("tbody",{children:[m&&s.jsx("tr",{children:s.jsx("td",{colSpan:7,className:"px-4 py-8 text-center text-slate-600",children:"Loading…"})}),!m&&p&&s.jsx("tr",{children:(0,s.jsxs)("td",{colSpan:7,className:"px-4 py-8 text-center",children:[(0,s.jsxs)("span",{className:"text-rose-600",children:["Error: ",p]})," ",/^HTTP 401/.test(p)&&(0,s.jsxs)("span",{className:"text-slate-600",children:["– Kamu perlu login sebagai employer."," ",s.jsx("a",{href:"/employer/login",className:"text-blue-700 underline",children:"Login"})]})]})}),!m&&!p&&0===e.length&&s.jsx("tr",{children:s.jsx("td",{colSpan:7,className:"px-4 py-8 text-center text-slate-600",children:"Belum ada pelamar."})}),!m&&!p&&e.map(e=>{let t=!!h[e.id],a=o.includes(e.status)?e.status:"submitted";return(0,s.jsxs)("tr",{className:"border-b last:border-0",children:[s.jsx("td",{className:"px-4 py-3 font-medium text-slate-900",children:e.candidateName}),s.jsx("td",{className:"px-4 py-3 text-slate-700",children:e.candidateEmail||"-"}),s.jsx("td",{className:"px-4 py-3 text-slate-700",children:e.jobTitle}),s.jsx("td",{className:"px-4 py-3",children:s.jsx("span",{className:"rounded-full bg-slate-100 px-2 py-1 text-xs text-slate-700",children:e.status})}),s.jsx("td",{className:"px-4 py-3 text-slate-700",children:g(e.createdAt)}),s.jsx("td",{className:"px-4 py-3",children:e.cv?s.jsx("a",{href:j(e.cv.url),target:"_blank",rel:"noopener noreferrer",className:"text-blue-700 underline",children:e.cv.name||"CV"}):s.jsx("span",{className:"text-slate-400",children:"—"})}),s.jsx("td",{className:"px-4 py-3",children:(0,s.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[s.jsx("button",{onClick:()=>f(e),disabled:t,className:`rounded-full px-3 py-1 text-xs font-medium text-white ${t?"bg-green-400":"bg-green-600 hover:bg-green-700"} disabled:opacity-60`,title:"Terima (ubah status ke HIRED)",children:t?"Menyimpan…":"Terima"}),s.jsx("button",{onClick:()=>v(e),disabled:t,className:`rounded-full px-3 py-1 text-xs font-medium text-white ${t?"bg-rose-400":"bg-rose-600 hover:bg-rose-700"} disabled:opacity-60`,title:"Tolak (ubah status ke REJECTED)",children:"Tolak"}),s.jsx("select",{value:a,disabled:t,onChange:t=>N(e.id,t.target.value),className:"rounded-full border border-slate-300 bg-white px-2 py-1 text-xs text-slate-700",title:"Ubah status cepat",children:o.map(e=>s.jsx("option",{value:e,children:e},e))})]})})]},e.id)})]})]})}),(0,s.jsxs)("p",{className:"mt-3 text-xs text-slate-500",children:["Tip: tambahkan query ",s.jsx("code",{children:"?jobId=<JOB_ID>"})," untuk melihat pelamar 1 job tertentu."]})]})}),s.jsx(i.default,{})]})}},6331:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});let s=(0,a(45347).createProxy)(String.raw`D:\tugas\magang\frontend-arkwork1\src\app\employer\applications\page.tsx#default`)}};var t=require("../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),s=t.X(0,[285,59,785],()=>a(64998));module.exports=s})();