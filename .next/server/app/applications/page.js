(()=>{var e={};e.id=442,e.ids=[442],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},49411:e=>{"use strict";e.exports=require("node:path")},97742:e=>{"use strict";e.exports=require("node:process")},41041:e=>{"use strict";e.exports=require("node:url")},3895:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>l.a,__next_app__:()=>u,originalPathname:()=>x,pages:()=>c,routeModule:()=>m,tree:()=>d}),a(65459),a(55512),a(90996);var r=a(30170),s=a(45002),i=a(83876),l=a.n(i),n=a(66299),o={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);a.d(t,o);let d=["",{children:["applications",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,65459)),"D:\\tugas\\magang\\frontend-arkwork1\\src\\app\\applications\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,55512)),"D:\\tugas\\magang\\frontend-arkwork1\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,90996,23)),"next/dist/client/components/not-found-error"]}],c=["D:\\tugas\\magang\\frontend-arkwork1\\src\\app\\applications\\page.tsx"],x="/applications/page",u={require:a,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/applications/page",pathname:"/applications",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},20645:(e,t,a)=>{Promise.resolve().then(a.bind(a,85738))},85738:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>o});var r=a(97247),s=a(9317),i=a(79906),l=a(28964);let n=process.env.NEXT_PUBLIC_API_BASE||process.env.NEXT_PUBLIC_API_URL||"http://localhost:4000";function o(){let{user:e}=(0,s.a)(),[t,a]=(0,l.useState)([]),[o,g]=(0,l.useState)(""),[j,b]=(0,l.useState)("new"),[f,w]=(0,l.useState)(!0),[v,N]=(0,l.useState)(null);async function y(){w(!0),N(null);try{let t=await k();a(t),function(e,t){if(e&&t)try{let a=JSON.parse(localStorage.getItem("ark_user_apps")??"{}");a[e]=t,localStorage.setItem("ark_user_apps",JSON.stringify(a))}catch{}}(e?.email,t)}catch(t){N("string"==typeof t?t:t?.message||(t&&"object"==typeof t?JSON.stringify(t):"Gagal memuat data dari server")),a(function(e){if(!e)return[];try{let t=JSON.parse(localStorage.getItem("ark_user_apps")??"{}");return(Array.isArray(t[e])?t[e]:[]).map(e=>({jobId:e.jobId,title:e.title??`Job ${e.jobId}`,location:e.location??"-",appliedAt:p(e.appliedAt??e.date??new Date),status:S(e.status)})).filter(e=>!!e.jobId)}catch{return[]}}(e?.email))}finally{w(!1)}}async function k(){let e=(n||"").replace(/\/+$/,""),t=`${e}/api/users/applications`,a=await fetch(t,{credentials:"include",headers:{"Content-Type":"application/json"}});if(!a.ok){let e="";try{let t=await a.json();e=t?.error||`HTTP ${a.status}`}catch{try{e=await a.text()}catch{e=`HTTP ${a.status}`}}throw Error(e)}let r=await a.json().catch(()=>({})),s=Array.isArray(r?.rows)?r.rows:Array.isArray(r?.data)?r.data:null;if(!Array.isArray(s))throw Error("Format API tidak sesuai: rows tidak ditemukan");return s.map(e=>({jobId:e.jobId??e.id??"",title:e.title??e.jobTitle??`Job ${e.jobId??e.id??""}`,location:e.location??"-",appliedAt:p(e.appliedAt??e.createdAt??new Date),status:S(e.status)}))}function S(e){let t=String(e||"").toLowerCase();return"submitted"===t||"review"===t||"shortlist"===t||"rejected"===t||"hired"===t?t:"review"}let A=(0,l.useMemo)(()=>{let e=o.trim().toLowerCase(),a=e?t.filter(t=>t.title.toLowerCase().includes(e)||t.location.toLowerCase().includes(e)||String(t.jobId).toLowerCase().includes(e)):t.slice();return a.sort((e,t)=>{let a=new Date(e.appliedAt).getTime(),r=new Date(t.appliedAt).getTime();return"new"===j?r-a:a-r}),a},[t,o,j]),_="string"==typeof v?v:v?JSON.stringify(v):null;return r.jsx("div",{className:"min-h-screen bg-neutral-50 py-10",children:(0,r.jsxs)("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:[_&&r.jsx("div",{className:"mb-4 rounded-2xl border border-amber-300 bg-amber-50 p-4 text-amber-900",children:(0,r.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,r.jsxs)("div",{children:[r.jsx("div",{className:"font-semibold",children:"Perhatian"}),r.jsx("div",{className:"text-sm break-words",children:_})]}),r.jsx("button",{onClick:y,className:"rounded-xl bg-amber-600 px-3 py-1.5 text-sm font-medium text-white hover:bg-amber-700 active:translate-y-[1px]",children:"Refresh"})]})}),(0,r.jsxs)("div",{className:"mb-8 overflow-hidden rounded-3xl border border-neutral-200 bg-gradient-to-br from-neutral-900 to-neutral-700 p-6 text-white shadow-sm",children:[(0,r.jsxs)("div",{className:"flex flex-col items-start justify-between gap-4 md:flex-row md:items-center",children:[(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-xs/5 opacity-70",children:"Lamaran Saya"}),r.jsx("h1",{className:"mt-1 text-2xl font-semibold tracking-tight",children:"My Applications"}),r.jsx("p",{className:"mt-1 text-sm opacity-80",children:"Riwayat lamaran kerja yang kamu kirim melalui ArkWork."})]}),r.jsx("div",{className:"flex items-center gap-2",children:(0,r.jsxs)(i.default,{href:"/jobs",className:"inline-flex items-center gap-2 rounded-xl bg-white/10 px-4 py-2 text-sm font-medium text-white ring-1 ring-white/15 hover:bg-white/15 active:translate-y-[1px]",children:[r.jsx("svg",{className:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",children:r.jsx("path",{d:"M4 7h16M4 12h16M4 17h10",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})}),"Cari Lowongan"]})})]}),(0,r.jsxs)("div",{className:"mt-5 grid gap-3 sm:grid-cols-3",children:[r.jsx(d,{label:"Total Lamaran",value:t.length}),r.jsx(d,{label:"Dalam Peninjauan",value:t.filter(e=>"review"===e.status||"submitted"===e.status).length}),r.jsx(d,{label:"Masuk Shortlist",value:t.filter(e=>"shortlist"===e.status).length})]})]}),(0,r.jsxs)("div",{className:"mb-4 flex flex-col items-stretch gap-3 sm:flex-row sm:items-center sm:justify-between",children:[(0,r.jsxs)("div",{className:"relative w-full sm:max-w-xs",children:[r.jsx("input",{value:o,onChange:e=>g(e.target.value),placeholder:"Cari posisi / lokasi / ID…",className:"w-full rounded-2xl border border-neutral-300 bg-white px-4 py-2.5 text-sm outline-none transition focus:border-neutral-900"}),o&&r.jsx("button",{onClick:()=>g(""),className:"absolute right-2 top-1/2 -translate-y-1/2 rounded-md px-2 py-1 text-xs text-neutral-600 hover:bg-neutral-100",children:"Hapus"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-xs text-neutral-500",children:"Urut:"}),(0,r.jsxs)("div",{className:"inline-flex overflow-hidden rounded-xl border border-neutral-300 bg-white p-0.5",children:[r.jsx("button",{onClick:()=>b("new"),className:`rounded-lg px-3 py-1.5 text-sm ${"new"===j?"bg-neutral-900 text-white":"text-neutral-700 hover:bg-neutral-50"}`,children:"Terbaru"}),r.jsx("button",{onClick:()=>b("old"),className:`rounded-lg px-3 py-1.5 text-sm ${"old"===j?"bg-neutral-900 text-white":"text-neutral-700 hover:bg-neutral-50"}`,children:"Terlama"})]})]})]}),r.jsx("div",{className:"overflow-hidden rounded-3xl border border-neutral-200 bg-white shadow-sm",children:f?r.jsx("div",{className:"px-6 py-16 text-center text-neutral-600",children:"Memuat…"}):0===A.length?r.jsx(c,{}):(0,r.jsxs)("div",{className:"overflow-x-auto",children:[(0,r.jsxs)("table",{className:"w-full text-sm",children:[r.jsx("thead",{className:"bg-neutral-50 text-neutral-600",children:(0,r.jsxs)("tr",{children:[r.jsx(x,{className:"w-[40%]",children:"Position"}),r.jsx(x,{children:"Location"}),r.jsx(x,{children:"Applied On"}),r.jsx(x,{children:"Status"})]})}),r.jsx("tbody",{className:"divide-y divide-neutral-200",children:A.map((e,t)=>(0,r.jsxs)("tr",{className:"hover:bg-neutral-50/60",children:[r.jsx(u,{children:r.jsx("div",{className:"max-w-[540px] truncate font-medium text-neutral-900",children:e.title})}),r.jsx(u,{className:"text-neutral-700",children:e.location}),r.jsx(u,{className:"text-neutral-700",children:h(e.appliedAt)}),r.jsx(u,{children:r.jsx(m,{status:e.status})})]},e.jobId))})]}),r.jsx("div",{className:"grid gap-3 p-3 sm:hidden",children:A.map((e,t)=>(0,r.jsxs)("div",{className:"rounded-2xl border border-neutral-200 p-4",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[r.jsx("div",{children:r.jsx("div",{className:"max-w-[240px] truncate font-medium text-neutral-900",children:e.title})}),r.jsx(m,{status:e.status})]}),(0,r.jsxs)("div",{className:"mt-3 grid grid-cols-2 gap-2 text-xs text-neutral-600",children:[(0,r.jsxs)("div",{children:[r.jsx("div",{className:"text-neutral-400",children:"Location"}),r.jsx("div",{className:"mt-0.5",children:e.location})]}),(0,r.jsxs)("div",{children:[r.jsx("div",{className:"text-neutral-400",children:"Applied On"}),r.jsx("div",{className:"mt-0.5",children:h(e.appliedAt)})]})]})]},`m-${e.jobId}`))})]})}),r.jsx("p",{className:"mt-6 text-center text-xs text-neutral-500",children:"Data lamaran disimpan lokal untuk demo bila server tidak tersedia."})]})})}function d({label:e,value:t}){return(0,r.jsxs)("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-4",children:[r.jsx("div",{className:"text-xs text-white/70",children:e}),r.jsx("div",{className:"mt-1 text-2xl font-semibold tracking-tight",children:t})]})}function c(){return r.jsx("div",{className:"grid place-items-center px-6 py-16 text-center",children:(0,r.jsxs)("div",{className:"mx-auto max-w-md",children:[r.jsx("div",{className:"mx-auto grid h-14 w-14 place-items-center rounded-2xl bg-neutral-100",children:r.jsx("svg",{className:"h-6 w-6 text-neutral-500",viewBox:"0 0 24 24",fill:"none",children:r.jsx("path",{d:"M4 7h16M4 12h16M4 17h10",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})})}),r.jsx("h3",{className:"mt-4 text-lg font-semibold text-neutral-900",children:"Belum ada lamaran"}),r.jsx("p",{className:"mt-1 text-sm text-neutral-600",children:"Kamu belum melamar pekerjaan. Mulai eksplorasi lowongan sekarang."}),r.jsx(i.default,{href:"/jobs",className:"mt-4 inline-flex items-center gap-2 rounded-xl bg-neutral-900 px-4 py-2 text-sm font-medium text-white hover:bg-neutral-800 active:translate-y-[1px]",children:"Telusuri Lowongan"})]})})}function x({children:e,className:t=""}){return r.jsx("th",{className:`px-6 py-3 text-left text-xs font-medium uppercase tracking-wider ${t}`,children:e})}function u({children:e,className:t=""}){return r.jsx("td",{className:`whitespace-nowrap px-6 py-4 ${t}`,children:e})}function m({status:e}){let t={submitted:{text:"Submitted",cls:"bg-blue-100 text-blue-700"},review:{text:"Under Review",cls:"bg-amber-100 text-amber-800"},shortlist:{text:"Shortlisted",cls:"bg-emerald-100 text-emerald-700"},rejected:{text:"Rejected",cls:"bg-rose-100 text-rose-700"},hired:{text:"Hired",cls:"bg-indigo-100 text-indigo-700"}},{text:a,cls:s}=t[e]??t.review;return r.jsx("span",{className:`inline-flex rounded-full px-2.5 py-1 text-xs font-semibold ${s}`,children:a})}function p(e){try{if("string"==typeof e)return new Date(e).toISOString();if(e instanceof Date)return e.toISOString();return new Date(e).toISOString()}catch{return new Date().toISOString()}}function h(e){let t=new Date(e);if(Number.isNaN(t.getTime()))return String(e);let a=Date.now()-t.getTime(),r=Math.floor(a/864e5);if(r<1){let e=Math.floor(a/36e5);return e<1?`${Math.max(1,Math.floor(a/6e4))} menit lalu`:`${e} jam lalu`}return r<30?`${r} hari lalu`:new Intl.DateTimeFormat(void 0,{year:"numeric",month:"short",day:"2-digit"}).format(t)}},65459:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>r});let r=(0,a(45347).createProxy)(String.raw`D:\tugas\magang\frontend-arkwork1\src\app\applications\page.tsx#default`)}};var t=require("../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[285,59,785],()=>a(3895));module.exports=r})();