(()=>{var e={};e.id=995,e.ids=[995],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},49411:e=>{"use strict";e.exports=require("node:path")},97742:e=>{"use strict";e.exports=require("node:process")},41041:e=>{"use strict";e.exports=require("node:url")},54623:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>i.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>c,routeModule:()=>u,tree:()=>o}),a(84761),a(76630),a(55512),a(90996);var s=a(30170),r=a(45002),l=a(83876),i=a.n(l),n=a(66299),d={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);a.d(t,d);let o=["",{children:["admin",{children:["(protected)",{children:["monet",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,84761)),"D:\\tugas\\magang\\frontend-arkwork1\\src\\app\\admin\\(protected)\\monet\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,76630)),"D:\\tugas\\magang\\frontend-arkwork1\\src\\app\\admin\\(protected)\\layout.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,55512)),"D:\\tugas\\magang\\frontend-arkwork1\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,90996,23)),"next/dist/client/components/not-found-error"]}],c=["D:\\tugas\\magang\\frontend-arkwork1\\src\\app\\admin\\(protected)\\monet\\page.tsx"],m="/admin/(protected)/monet/page",x={require:a,loadChunk:()=>Promise.resolve()},u=new s.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/admin/(protected)/monet/page",pathname:"/admin/monet",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},1461:(e,t,a)=>{Promise.resolve().then(a.bind(a,59459))},59459:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>d});var s=a(97247),r=a(28964),l=a(90002);let i=e=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",maximumFractionDigits:0}).format(e),n={id:"",slug:"",name:"",description:"",amount:"0",currency:"IDR",interval:"month",active:!0,priceId:"",trialDays:"0"};function d(){let[e,t]=(0,r.useState)([]),[a,d]=(0,r.useState)(!0),[o,c]=(0,r.useState)(null),[m,x]=(0,r.useState)(!1),[u,p]=(0,r.useState)(n),h=(0,r.useMemo)(()=>!!u.id,[u.id]);async function g(){d(!0),c(null);try{let e=await (0,l.hi)("/api/admin/plans");t(Array.isArray(e)?e:[])}catch(e){c(e?.message||"Gagal memuat paket")}finally{d(!1)}}async function b(){try{c(null);let e={slug:(u.slug||"").trim().toLowerCase(),name:(u.name||"").trim(),description:u.description?.trim()||null,amount:Number(u.amount||0),currency:(u.currency||"IDR").trim(),interval:(u.interval||"month").trim(),active:!!u.active,priceId:u.priceId?.trim()||null,trialDays:Math.max(0,Number(u.trialDays||0))};if(!e.slug)throw Error("Slug wajib diisi");if(!e.name)throw Error("Nama paket wajib diisi");if(!Number.isFinite(e.amount)||e.amount<0)throw Error("Harga tidak valid");h?await (0,l.hi)(`/api/admin/plans/${u.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}):await (0,l.hi)("/api/admin/plans",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),x(!1),await g()}catch(e){c(e?.message||"Gagal menyimpan paket")}}async function v(e){if(confirm(`Hapus paket "${e.name}"?`))try{await (0,l.hi)(`/api/admin/plans/${e.id}`,{method:"DELETE"}),await g()}catch(e){alert(e?.message||"Gagal menghapus")}}return(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsxs)("div",{className:"mb-6 flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[s.jsx("h1",{className:"text-xl font-semibold text-slate-900",children:"Paket Monetisasi"}),s.jsx("p",{className:"text-sm text-slate-600",children:"Kelola paket, harga (boleh 0/Gratis), dan masa trial."})]}),s.jsx("button",{onClick:function(){p(n),x(!0)},className:"rounded-xl bg-blue-600 px-4 py-2 text-sm font-semibold text-white hover:bg-blue-700",children:"+ Paket Baru"})]}),o&&s.jsx("div",{className:"mb-4 rounded-xl border border-rose-200 bg-rose-50 px-4 py-2 text-rose-700",children:o}),a?s.jsx("div",{className:"text-slate-500",children:"Loading…"}):0===e.length?(0,s.jsxs)("div",{className:"rounded-xl border border-slate-200 bg-white p-6 text-sm text-slate-600",children:["Belum ada paket. Klik ",s.jsx("b",{children:"+ Paket Baru"})," untuk menambahkan."]}):s.jsx("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:e.map(e=>(0,s.jsxs)("div",{className:"rounded-2xl border border-slate-200 bg-white p-4 shadow-sm",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{children:[s.jsx("div",{className:"text-sm font-semibold text-slate-900",children:e.name}),(0,s.jsxs)("div",{className:"text-xs text-slate-500",children:["/",e.interval]})]}),s.jsx("span",{className:`rounded-full px-2 py-0.5 text-xs ${e.active?"bg-emerald-100 text-emerald-700":"bg-slate-100 text-slate-600"}`,children:e.active?"Active":"Inactive"})]}),s.jsx("div",{className:"mt-2 text-lg font-bold",children:0===e.amount?"Gratis":i(e.amount)}),(0,s.jsxs)("div",{className:"mt-1 text-xs text-slate-500",children:["Trial: ",(0,s.jsxs)("b",{children:[e.trialDays," hari"]})]}),s.jsx("div",{className:"mt-2 text-sm text-slate-600 line-clamp-3",children:e.description||"—"}),(0,s.jsxs)("div",{className:"mt-4 flex gap-2",children:[s.jsx("button",{onClick:()=>{p({id:e.id,slug:e.slug??"",name:e.name??"",description:e.description??"",amount:String(e.amount??0),currency:e.currency??"IDR",interval:e.interval??"month",active:!!e.active,priceId:e.priceId??"",trialDays:String(e.trialDays??0)}),x(!0)},className:"rounded-lg border border-slate-300 px-3 py-1.5 text-sm hover:bg-slate-50",children:"Edit"}),s.jsx("button",{onClick:()=>v(e),className:"rounded-lg border border-rose-300 px-3 py-1.5 text-sm text-rose-700 hover:bg-rose-50",children:"Hapus"})]}),(0,s.jsxs)("div",{className:"mt-3 text-xs text-slate-500",children:["slug: ",e.slug]})]},e.id))}),m&&s.jsx("div",{className:"fixed inset-0 z-50 grid place-items-center bg-black/30 p-4",role:"dialog","aria-modal":"true",children:(0,s.jsxs)("div",{className:"w-full max-w-lg rounded-2xl bg-white p-5 shadow-xl",children:[(0,s.jsxs)("div",{className:"mb-3 flex items-center justify-between",children:[s.jsx("h2",{className:"text-lg font-semibold",children:h?"Edit Paket":"Tambah Paket"}),s.jsx("button",{onClick:()=>x(!1),className:"rounded-lg border px-2 text-slate-600",children:"✕"})]}),(0,s.jsxs)("div",{className:"grid gap-3",children:[(0,s.jsxs)("label",{className:"block text-sm",children:[s.jsx("div",{className:"mb-1 text-slate-600",children:"Nama"}),s.jsx("input",{value:u.name,onChange:e=>p(t=>({...t,name:e.target.value})),className:"w-full rounded-xl border border-slate-300 px-3 py-2 text-sm"})]}),(0,s.jsxs)("label",{className:"block text-sm",children:[s.jsx("div",{className:"mb-1 text-slate-600",children:"Slug"}),s.jsx("input",{value:u.slug,onChange:e=>p(t=>({...t,slug:e.target.value.replace(/\s+/g,"-").toLowerCase()})),className:"w-full rounded-xl border border-slate-300 px-3 py-2 text-sm"})]}),(0,s.jsxs)("div",{className:"grid gap-3 sm:grid-cols-3",children:[(0,s.jsxs)("label",{className:"block text-sm sm:col-span-2",children:[s.jsx("div",{className:"mb-1 text-slate-600",children:"Harga (IDR)"}),s.jsx("input",{type:"number",inputMode:"numeric",min:0,value:u.amount,onChange:e=>{let t=e.target.value.replace(/[^\d]/g,"");p(e=>({...e,amount:t}))},className:"w-full rounded-xl border border-slate-300 px-3 py-2 text-sm"}),s.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"Isi 0 untuk paket gratis."})]}),(0,s.jsxs)("label",{className:"block text-sm",children:[s.jsx("div",{className:"mb-1 text-slate-600",children:"Interval"}),(0,s.jsxs)("select",{value:u.interval,onChange:e=>p(t=>({...t,interval:e.target.value})),className:"w-full rounded-xl border border-slate-300 px-3 py-2 text-sm",children:[s.jsx("option",{value:"month",children:"Bulanan"}),s.jsx("option",{value:"year",children:"Tahunan"})]})]})]}),(0,s.jsxs)("label",{className:"block text-sm",children:[s.jsx("div",{className:"mb-1 text-slate-600",children:"Trial (hari)"}),s.jsx("input",{type:"number",inputMode:"numeric",min:0,value:u.trialDays,onChange:e=>{let t=e.target.value.replace(/[^\d]/g,"");p(e=>({...e,trialDays:t}))},className:"w-full rounded-xl border border-slate-300 px-3 py-2 text-sm"}),s.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"Isi 0 jika tidak ada trial."})]}),(0,s.jsxs)("label",{className:"block text-sm",children:[s.jsx("div",{className:"mb-1 text-slate-600",children:"Deskripsi"}),s.jsx("textarea",{value:u.description,onChange:e=>p(t=>({...t,description:e.target.value})),rows:3,className:"w-full rounded-xl border border-slate-300 px-3 py-2 text-sm"})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("label",{className:"inline-flex items-center gap-2 text-sm",children:[s.jsx("input",{type:"checkbox",checked:u.active,onChange:e=>p(t=>({...t,active:e.target.checked})),className:"h-4 w-4 rounded border-slate-300 text-blue-600"}),"Aktif"]}),(0,s.jsxs)("label",{className:"text-xs text-slate-500",children:["Price ID (opsional):",s.jsx("input",{value:u.priceId,onChange:e=>p(t=>({...t,priceId:e.target.value})),className:"ml-2 rounded-lg border border-slate-300 px-2 py-1"})]})]}),(0,s.jsxs)("div",{className:"mt-3 flex justify-end gap-2",children:[s.jsx("button",{onClick:()=>x(!1),className:"rounded-xl border border-slate-300 px-4 py-2 text-sm",children:"Batal"}),s.jsx("button",{onClick:b,disabled:!u.name||!u.slug||0>Number(u.amount),className:"rounded-xl bg-blue-600 px-4 py-2 text-sm font-semibold text-white hover:bg-blue-700 disabled:opacity-60",children:"Simpan"})]})]})]})})]})}},84761:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});let s=(0,a(45347).createProxy)(String.raw`D:\tugas\magang\frontend-arkwork1\src\app\admin\(protected)\monet\page.tsx#default`)}};var t=require("../../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),s=t.X(0,[285,59,785,342],()=>a(54623));module.exports=s})();