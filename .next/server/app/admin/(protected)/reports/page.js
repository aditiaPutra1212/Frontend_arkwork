(()=>{var e={};e.id=975,e.ids=[975],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},49411:e=>{"use strict";e.exports=require("node:path")},97742:e=>{"use strict";e.exports=require("node:process")},41041:e=>{"use strict";e.exports=require("node:url")},42157:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>l.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>c,routeModule:()=>x,tree:()=>d}),a(72131),a(76630),a(55512),a(90996);var r=a(30170),s=a(45002),n=a(83876),l=a.n(n),o=a(66299),i={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>o[e]);a.d(t,i);let d=["",{children:["admin",{children:["(protected)",{children:["reports",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,72131)),"D:\\tugas\\magang\\frontend-arkwork1\\src\\app\\admin\\(protected)\\reports\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,76630)),"D:\\tugas\\magang\\frontend-arkwork1\\src\\app\\admin\\(protected)\\layout.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,55512)),"D:\\tugas\\magang\\frontend-arkwork1\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,90996,23)),"next/dist/client/components/not-found-error"]}],c=["D:\\tugas\\magang\\frontend-arkwork1\\src\\app\\admin\\(protected)\\reports\\page.tsx"],u="/admin/(protected)/reports/page",p={require:a,loadChunk:()=>Promise.resolve()},x=new r.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/admin/(protected)/reports/page",pathname:"/admin/reports",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},35013:(e,t,a)=>{Promise.resolve().then(a.bind(a,75525))},75525:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>u});var r=a(97247),s=a(28964),n=a(34178),l=a(79906);let o=process.env.NEXT_PUBLIC_API_BASE||process.env.NEXT_PUBLIC_API_URL||"http://localhost:4000",i=e=>`${o.replace(/\/+$/,"")}${e}`,d={OPEN:"baru",UNDER_REVIEW:"diproses",ACTION_TAKEN:"selesai",DISMISSED:"abaikan"},c={baru:"OPEN",diproses:"UNDER_REVIEW",selesai:"ACTION_TAKEN",abaikan:"DISMISSED"};function u(){(0,n.useRouter)();let[e,t]=(0,s.useState)([]),[a,o]=(0,s.useState)(""),[u,p]=(0,s.useState)(!1),[x,m]=(0,s.useState)(null),h=async()=>{p(!0),m(null);try{let e;console.log(`Fetching reports from: ${i("/api/reports")}`);let a=await fetch(i("/api/reports"),{cache:"no-store",credentials:"include"});console.log(`API Response Status: ${a.status}`);try{e=await a.json(),console.log("Raw data received from API:",e)}catch(e){throw e}if(!a.ok||!e?.ok)throw Error(e?.message||`Failed to fetch: ${a.status}`);let r=Array.isArray(e?.data)?e.data:[];console.log("Processed data to be set in state:",r),t(r)}catch(e){console.error("[admin/reports] load() failed:",e),m(e.message||"Gagal memuat data laporan."),t([])}finally{p(!1)}},g=(e,t)=>t?`${e.replace(/\/+$/,"")}?focus=${encodeURIComponent(String(t))}`:e,j=e=>{if(!e)return"/";let t=e.replace(/\/?\(protected\)\//g,"/").replace(/\/{2,}/g,"/");return t.startsWith("/")?t:"/"+t},b=e=>{if(e.targetUrl)return j(e.targetUrl);let t=e.targetSlug||e.targetId,a=e.targetType,r="";switch(a){case"JOB":r="/admin/employer-jobs";break;case"EMPLOYER":case"COMPANY":r="/admin/user-management/employers";break;case"USER":r="/admin/user-management/users";break;case"TENDER":r="/admin/tenders";break;default:return null}return t?g(j(r),t):null},N=(0,s.useMemo)(()=>{let t=Array.isArray(e)?e:[];if(!a.trim())return t;let r=a.toLowerCase();return t.filter(e=>[e.judul,e.perusahaan,e.reason,e.details,e.status].filter(e=>null!=e).some(e=>String(e).toLowerCase().includes(r)))},[e,a]),f=async(e,t)=>{},y=async e=>{},v=e=>"OPEN"===e?"bg-amber-100 text-amber-700":"UNDER_REVIEW"===e?"bg-blue-100 text-blue-700":"ACTION_TAKEN"===e?"bg-emerald-100 text-emerald-700":"bg-gray-100 text-gray-700",P=e=>{if(!e)return"—";try{let t=new Date(e);if(isNaN(t.getTime()))return"—";return t.toLocaleDateString("id-ID",{day:"2-digit",month:"short",year:"numeric"})}catch{return"—"}};return(0,r.jsxs)("main",{className:"mx-auto max-w-6xl space-y-4 p-4",children:[(0,r.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[r.jsx("h1",{className:"text-xl font-semibold",children:"Admin \xb7 Laporan Masuk"}),(0,r.jsxs)("div",{className:"flex gap-2",children:[r.jsx("input",{value:a,onChange:e=>o(e.target.value),placeholder:"Cari laporan…",className:"w-full max-w-xs rounded-xl border px-3 py-2 focus:outline-none focus:ring"}),r.jsx("button",{onClick:h,disabled:u,className:"rounded-xl border px-3 py-2 hover:bg-gray-50 disabled:opacity-50",children:u?"Memuat…":"Muat ulang"})]})]}),x&&(0,r.jsxs)("div",{className:"rounded-md bg-red-50 p-4 text-sm text-red-700",role:"alert",children:[" ",r.jsx("strong",{children:"Error:"})," ",x," "]}),r.jsx("div",{className:"overflow-hidden rounded-2xl border bg-white",children:(0,r.jsxs)("table",{className:"w-full text-left text-sm",children:[r.jsx("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[r.jsx("th",{className:"p-3",children:"Judul"}),r.jsx("th",{className:"p-3",children:"Perusahaan"}),r.jsx("th",{className:"p-3",children:"Alasan"}),r.jsx("th",{className:"p-3",children:"Catatan"}),r.jsx("th",{className:"p-3",children:"Status"}),r.jsx("th",{className:"p-3",children:"Dibuat"}),r.jsx("th",{className:"p-3 text-right",children:"Aksi"})]})}),(0,r.jsxs)("tbody",{children:[u&&(0,r.jsxs)("tr",{children:[" ",r.jsx("td",{colSpan:7,className:"p-6 text-center text-gray-500",children:"Memuat data..."})," "]}),!u&&!x&&0===N.length&&(0,r.jsxs)("tr",{children:[" ",(0,r.jsxs)("td",{colSpan:7,className:"p-6 text-center text-gray-500",children:[" Belum ada data laporan ",a?"yang cocok.":"."," "]})," "]}),!u&&!x&&N.length>0&&N.map(e=>{let t=String(e.status),a=d[t]||t,s=P(e.createdAt),n=b(e),o=e.judul??null,i=e.perusahaan??null,u=e.reason??null,p=e.details??null;return(0,r.jsxs)("tr",{className:`border-t align-top ${n?"hover:bg-gray-50":""}`,children:[r.jsx("td",{className:"p-3 font-medium",children:n?r.jsx(l.default,{href:n,onClick:e=>e.stopPropagation(),className:"text-blue-600 hover:underline",prefetch:!1,children:o||"—"}):r.jsx("span",{children:o||"—"})}),r.jsx("td",{className:"p-3",children:i||"—"}),r.jsx("td",{className:"p-3",children:u||"—"}),r.jsx("td",{className:"p-3 max-w-[24rem]",children:r.jsx("div",{className:"line-clamp-3",children:p||"—"})}),r.jsx("td",{className:"p-3",children:r.jsx("span",{className:`rounded-full px-2 py-1 text-xs ${v(t)}`,children:a})}),r.jsx("td",{className:"p-3 text-gray-500",children:s}),r.jsx("td",{className:"p-3",children:(0,r.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,r.jsxs)("select",{value:a,onChange:t=>f(e.id,c[t.target.value]),onClick:e=>e.stopPropagation(),className:"rounded-xl border px-2 py-1 text-xs",children:[r.jsx("option",{value:"baru",children:"baru"})," ",r.jsx("option",{value:"diproses",children:"diproses"})," ",r.jsx("option",{value:"selesai",children:"selesai"})," ",r.jsx("option",{value:"abaikan",children:"abaikan"})]}),r.jsx("button",{onClick:t=>{t.stopPropagation(),y(e.id)},className:"rounded-xl border px-2 py-1 text-xs text-red-600 hover:bg-red-50",children:" Hapus "})]})})]},e.id)})]})]})})]})}},72131:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>r});let r=(0,a(45347).createProxy)(String.raw`D:\tugas\magang\frontend-arkwork1\src\app\admin\(protected)\reports\page.tsx#default`)}};var t=require("../../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[285,59,785,342],()=>a(42157));module.exports=r})();