"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7796],{67796:function(e,a,t){t.r(a),t.d(a,{default:function(){return u}});var l=t(57437),s=t(2265),n=t(40257);let r=n.env.NEXT_PUBLIC_API_BASE||n.env.NEXT_PUBLIC_API_URL||"",o=e=>"".concat(r.replace(/\/+$/,"")).concat(e),i={SCAM:"Spam / Penipuan",PHISHING:"Phishing / Mencuri data",DUPLICATE:"Lowongan Duplikat",MISLEADING:"Informasi Menyesatkan / Palsu",OTHER:"Lainnya"},d="SCAM";function u(e){let{isOpen:a,onClose:t,onSubmitted:n,jobId:r,jobTitle:u,employerName:m}=e,[b,h]=(0,s.useState)(d),[x,p]=(0,s.useState)(""),[g,f]=(0,s.useState)(null),[j,k]=(0,s.useState)(!1);(0,s.useEffect)(()=>{a&&(h(d),p(""),f(null),k(!1))},[a]);let v=async e=>{if(e.preventDefault(),k(!0),f(null),!r||"string"!=typeof r||r.length<10){f("Error: Job ID tidak valid atau tidak ada. Coba refresh halaman."),k(!1);return}try{let e=await fetch(o("/api/reports"),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({jobId:r,reason:b,details:x||null})}),a=await e.json();if(!e.ok){if(400===e.status&&a.errors){let e=Object.values(a.errors).flat().join(", ");f("Data tidak valid: ".concat(e))}else f(a.message||"Gagal mengirim laporan. Coba lagi nanti.");k(!1);return}k(!1),n()}catch(e){console.error("[ReportDialog] Fetch error:",e),k(!1),f("Tidak dapat terhubung ke server.")}};return a?(0,l.jsx)("div",{className:"fixed inset-0 z-[200] flex items-center justify-center bg-black/60",onClick:t,"aria-modal":"true",role:"dialog",children:(0,l.jsxs)("div",{className:"relative w-full max-w-lg rounded-2xl bg-white p-6 shadow-xl",onClick:e=>e.stopPropagation(),children:[(0,l.jsx)("button",{onClick:t,disabled:j,className:"absolute top-4 right-4 rounded-full p-1 text-neutral-500 hover:bg-neutral-100 disabled:opacity-50",children:(0,l.jsx)(c,{className:"h-6 w-6"})}),(0,l.jsx)("h2",{className:"text-xl font-semibold text-neutral-900",children:"Laporkan Lowongan"}),(0,l.jsx)("p",{className:"mt-1 text-sm text-neutral-600",children:"Bantu kami menjaga komunitas tetap aman."}),(0,l.jsxs)("div",{className:"mt-4 rounded-lg border border-neutral-200 bg-neutral-50 p-3",children:[(0,l.jsx)("p",{className:"truncate text-sm font-medium text-neutral-800",children:u||"Memuat..."}),(0,l.jsx)("p",{className:"truncate text-sm text-neutral-600",children:m||"Memuat..."})]}),(0,l.jsxs)("form",{onSubmit:v,className:"mt-4 space-y-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"reason",className:"mb-1 block text-sm font-medium text-neutral-700",children:"Alasan Pelaporan"}),(0,l.jsx)("select",{id:"reason",name:"reason",value:b,onChange:e=>h(e.target.value),className:"block w-full rounded-lg border-neutral-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",children:Object.keys(i).map(e=>(0,l.jsxs)("option",{value:e,children:[" ",i[e]," "]},e))})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"details",className:"mb-1 block text-sm font-neutral-700",children:"Catatan Tambahan (Opsional)"}),(0,l.jsx)("textarea",{id:"details",name:"details",rows:3,value:x,onChange:e=>p(e.target.value),placeholder:"Berikan detail lebih lanjut...",className:"block w-full rounded-lg border-neutral-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"})]}),g&&(0,l.jsx)("div",{className:"rounded-md bg-red-50 p-3 text-sm text-red-700",role:"alert",children:g}),(0,l.jsxs)("div",{className:"flex justify-end gap-3 pt-2",children:[(0,l.jsx)("button",{type:"button",onClick:t,disabled:j,className:"rounded-lg border border-neutral-300 bg-white px-4 py-2 text-sm font-medium text-neutral-700 shadow-sm hover:bg-neutral-50 disabled:opacity-50",children:"Batal"}),(0,l.jsx)("button",{type:"submit",disabled:j||!r,className:"rounded-lg border border-transparent bg-blue-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-blue-700 disabled:opacity-50 disabled:bg-blue-400",children:j?"Mengirim...":"Kirim Laporan"})]})]})]})}):null}function c(e){return(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...e,children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})}}}]);