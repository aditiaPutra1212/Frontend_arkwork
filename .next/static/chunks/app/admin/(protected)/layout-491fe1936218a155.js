(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5885],{57119:function(e,t,r){Promise.resolve().then(r.bind(r,16980))},99376:function(e,t,r){"use strict";var s=r(35475);r.o(s,"usePathname")&&r.d(t,{usePathname:function(){return s.usePathname}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}}),r.o(s,"useSearchParams")&&r.d(t,{useSearchParams:function(){return s.useSearchParams}})},16980:function(e,t,r){"use strict";r.d(t,{default:function(){return c}});var s=r(57437),n=r(27648),i=r(99376),a=r(2265),o=r(84603),l=r(40257);function c(e){var t;let{userEmail:r,onLogout:c}=e,j=null!==(t=(0,i.usePathname)())&&void 0!==t?t:"",v=(0,i.useRouter)(),{signout:k}=(0,o.a)(),[y,N]=(0,a.useState)(!1),[C,L]=(0,a.useState)(!1),[A,M]=(0,a.useState)(!1);(0,a.useEffect)(()=>N(!1),[j]),(0,a.useEffect)(()=>{let e=document.body.style.overflow;return document.body.style.overflow=y?"hidden":e||"",()=>{document.body.style.overflow=e||""}},[y]),(0,a.useEffect)(()=>{let e=e=>{"Escape"===e.key&&N(!1)};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[]);let W=(0,a.useCallback)(()=>N(!0),[]),P=(0,a.useCallback)(()=>N(!1),[]),_=(0,a.useCallback)(async()=>{let e=!1;try{if("function"==typeof k)console.log("[AdminSidebar] Attempting logout via useAuth().signout()..."),await k(),console.log("[AdminSidebar] Logout via useAuth() presumably successful."),e=!0;else{console.warn("[AdminSidebar] useAuth().signout() not available, attempting direct API call...");try{let t=l.env.NEXT_PUBLIC_API_URL||"http://localhost:4000",r="".concat(t,"/api/admin/signout");console.log("[AdminSidebar] Calling fallback logout: POST ".concat(r));let s=await fetch(r,{method:"POST",credentials:"include",headers:{}});if(!s.ok&&204!==s.status){let e="Logout failed with status ".concat(s.status);try{e=(await s.json()).message||e}catch(e){}throw console.error("[AdminSidebar] Fallback logout API call failed: ".concat(e)),Error(e)}console.log("[AdminSidebar] Direct API call to /api/admin/signout successful."),e=!0}catch(e){console.error("[AdminSidebar] Fallback admin logout request failed:",e),alert("Logout via API failed: ".concat(e instanceof Error?e.message:"Unknown error"));return}}}catch(e){console.error("[AdminSidebar] Logout process error:",e),alert("An error occurred during logout: ".concat(e instanceof Error?e.message:"Unknown error"));return}if(e)try{console.log("[AdminSidebar] Logout successful, redirecting to /auth/signin..."),v.replace("/auth/signin")}catch(e){console.error("[AdminSidebar] Redirection failed after logout:",e),window.location.href="/auth/signin"}else console.warn("[AdminSidebar] Logout was not marked as successful, redirection skipped.")},[k,v]),S=(0,a.useCallback)(async()=>{try{L(!0),c?await c():await _()}catch(e){console.error("Logout failed:",e)}finally{L(!1)}},[c,_]),E=(0,a.useMemo)(()=>[{name:"Dashboard",path:"/admin",icon:x},{name:"Reports",path:"/admin/reports",icon:w},{name:"Tenders Management",path:"/admin/tenders",icon:m},{name:"Monetisasi (Plans)",path:"/admin/monet",icon:g},{name:"Payments (Midtrans)",path:"/admin/payments",icon:f}],[]),B=e=>"/admin"===e?j===e:j===e||j.startsWith(e+"/");function I(e){let{name:t,path:r,Icon:i}=e,a=B(r);return(0,s.jsx)("li",{children:(0,s.jsxs)(n.default,{href:r,"aria-current":a?"page":void 0,className:["group relative flex items-center gap-3 rounded-xl px-3 py-2 text-sm transition","ring-0 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-amber-400/60",a?"bg-white/10 text-white shadow-[inset_0_1px_0_0_rgba(255,255,255,0.08)]":"text-white/85 hover:bg-white/8 hover:text-white"].join(" "),children:[(0,s.jsx)("span",{className:["absolute left-0 top-1/2 -translate-y-1/2 h-6 w-1 rounded-r-full",a?"bg-amber-400":"bg-transparent group-hover:bg-white/20"].join(" ")}),(0,s.jsx)(i,{className:"h-5 w-5 opacity-95"}),(0,s.jsx)("span",{className:"truncate",children:t})]})})}let R=(0,s.jsxs)("aside",{"aria-label":"Admin navigation",className:["hidden md:flex fixed left-0 top-0 z-40 h-screen flex-col border-r border-white/10","bg-[radial-gradient(1200px_600px_at_-200px_-200px,#1e3a8a_0%,#0b1736_40%,#0a1228_100%)] text-white","transition-[width] duration-300 ease-in-out",A?"w-20":"w-72"].join(" "),children:[(0,s.jsxs)("div",{className:"flex h-16 items-center px-3 border-b border-white/10/50",children:[(0,s.jsx)("button",{type:"button",onClick:()=>M(e=>!e),"aria-label":A?"Expand sidebar":"Collapse sidebar",className:"grid h-10 w-10 place-items-center rounded-xl border border-white/10 hover:bg-white/5 active:scale-95 transition",children:(0,s.jsx)(h,{className:"h-5 w-5 text-white"})}),!A&&(0,s.jsxs)("div",{className:"ml-3 leading-tight",children:[(0,s.jsx)("div",{className:"text-sm font-semibold",children:"Admin Panel"}),(0,s.jsx)("div",{className:"text-xs text-white/70",children:"ArkWork CMS"})]})]}),(0,s.jsxs)("nav",{className:"mt-2 flex-1 overflow-y-auto px-2",children:[(0,s.jsx)("p",{className:["px-3 text-[10px] uppercase tracking-wider text-white/50 mb-2",A?"opacity-0 pointer-events-none":"opacity-100"].join(" "),children:"Main"}),(0,s.jsxs)("ul",{className:"space-y-1",role:"list",children:[E.map(e=>{let{name:t,path:r,icon:n}=e;return(0,s.jsx)(I,{name:t,path:r,Icon:n},r)}),(0,s.jsx)("li",{children:(0,s.jsxs)("button",{type:"button",onClick:S,disabled:C,className:"group relative w-full flex items-center gap-3 rounded-xl px-3 py-2 text-sm transition text-left text-red-100 hover:bg-red-500/10 hover:text-white ring-0 focus-visible:ring-2 focus-visible:ring-red-400/60 disabled:opacity-60",children:[(0,s.jsx)("span",{className:"absolute left-0 top-1/2 -translate-y-1/2 h-6 w-1 rounded-r-full bg-transparent group-hover:bg-red-400"}),(0,s.jsx)(b,{className:"h-5 w-5"}),!A&&(0,s.jsx)("span",{className:"truncate",children:C?"Logging out…":"Logout"})]})})]})]}),(0,s.jsxs)("div",{className:"mt-auto border-t border-white/10 px-3 py-3",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"h-9 w-9 shrink-0 rounded-xl bg-white/10 grid place-items-center ring-1 ring-white/10",children:(0,s.jsx)(p,{className:"h-4 w-4"})}),!A&&(0,s.jsxs)("div",{className:"min-w-0 leading-tight",children:[(0,s.jsx)("div",{className:"text-xs font-semibold",children:"Administrator"}),(0,s.jsx)("div",{className:"text-[11px] text-white/60 truncate",children:null!=r?r:"admin@arkwork.local"})]}),!A&&(0,s.jsxs)("button",{type:"button",onClick:S,disabled:C,className:"ml-auto inline-flex items-center gap-2 rounded-lg border border-white/10 px-2.5 py-1.5 text-xs hover:bg-white/10 active:scale-95 transition disabled:opacity-60","aria-label":"Logout",children:[(0,s.jsx)(b,{className:"h-3.5 w-3.5"}),(0,s.jsx)("span",{children:C?"Logging…":"Logout"})]})]}),(0,s.jsxs)("div",{className:["mt-3 text-[11px] text-white/60",A?"text-center":""].join(" "),children:["\xa9 ",new Date().getFullYear()," ArkWork Admin"]})]})]});return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"md:hidden sticky top-0 z-40 bg-white/90 backdrop-blur border-b border-neutral-200",children:(0,s.jsxs)("div",{className:"h-14 flex items-center justify-between px-3",children:[(0,s.jsx)("button",{type:"button",onClick:W,"aria-label":"Open menu",className:"grid h-10 w-10 place-items-center rounded-xl border border-neutral-200 text-neutral-700 active:scale-95",children:(0,s.jsx)(d,{className:"h-5 w-5"})}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"h-8 w-8 rounded-xl bg-blue-600 grid place-items-center shadow-sm",children:(0,s.jsx)(h,{className:"h-4 w-4 text-white"})}),(0,s.jsx)("div",{className:"text-sm font-semibold",children:"Admin Panel"})]}),(0,s.jsx)("div",{className:"w-10"})]})}),y&&(0,s.jsx)("div",{onClick:P,className:"fixed inset-0 z-50 md:hidden bg-black/40","aria-hidden":"true"}),(0,s.jsx)("aside",{role:"dialog","aria-modal":"true","aria-label":"Admin menu drawer",className:["fixed inset-y-0 left-0 z-50 w-[85%] max-w-[18rem] md:hidden","transform transition-transform duration-300 ease-out",y?"translate-x-0":"-translate-x-full"].join(" "),style:{visibility:y?"visible":"hidden"},children:(0,s.jsxs)("div",{className:"flex h-full flex-col bg-gradient-to-b from-blue-950 via-blue-900 to-blue-800 text-white shadow-2xl",children:[(0,s.jsxs)("div",{className:"flex h-14 items-center justify-between px-3 border-b border-white/10",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"h-8 w-8 rounded-xl bg-white/10 grid place-items-center",children:(0,s.jsx)(h,{className:"h-4 w-4 text-white"})}),(0,s.jsx)("div",{className:"text-sm font-semibold",children:"Admin Panel"})]}),(0,s.jsx)("button",{type:"button",onClick:P,"aria-label":"Close menu",className:"grid h-9 w-9 place-items-center rounded-xl border border-white/10 active:scale-95",children:(0,s.jsx)(u,{className:"h-5 w-5 text-white/90"})})]}),(0,s.jsx)("nav",{className:"flex-1 overflow-y-auto px-2",children:(0,s.jsxs)("ul",{className:"space-y-1",role:"list",children:[E.map(e=>{let{name:t,path:r,icon:i}=e;return(0,s.jsx)("li",{children:(0,s.jsxs)(n.default,{href:r,"aria-current":B(r)?"page":void 0,className:["group relative flex items-center gap-3 rounded-xl px-3 py-3 text-[15px] transition",B(r)?"bg-white/10 text-white":"text-white/85 hover:bg-white/8 hover:text-white"].join(" "),onClick:()=>N(!1),children:[(0,s.jsx)("span",{className:["absolute left-0 top-1/2 -translate-y-1/2 h-6 w-1 rounded-r-full",B(r)?"bg-amber-400":"bg-transparent"].join(" ")}),(0,s.jsx)(i,{className:"h-5 w-5 opacity-95"}),(0,s.jsx)("span",{className:"truncate",children:t})]})},r)}),(0,s.jsx)("li",{children:(0,s.jsxs)("button",{type:"button",onClick:async()=>{await S(),N(!1)},disabled:C,className:"group relative w-full flex items-center gap-3 rounded-xl px-3 py-3 text-[15px] transition text-left text-red-100 hover:bg-red-500/10 hover:text-white disabled:opacity-60",children:[(0,s.jsx)("span",{className:"absolute left-0 top-1/2 -translate-y-1/2 h-6 w-1 rounded-r-full bg-transparent group-hover:bg-red-400"}),(0,s.jsx)(b,{className:"h-5 w-5"}),(0,s.jsx)("span",{className:"truncate",children:C?"Logging out…":"Logout"})]})})]})}),(0,s.jsxs)("div",{className:"border-t border-white/10 px-4 py-3 text-xs text-white/70",children:["\xa9 ",new Date().getFullYear()," ArkWork Admin"]})]})}),R]})}function d(e){return(0,s.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",...e,children:(0,s.jsx)("path",{d:"M4 7h16M4 12h16M4 17h16",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})})}function u(e){return(0,s.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",...e,children:(0,s.jsx)("path",{d:"M6 6l12 12M6 18L18 6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})})}function h(e){return(0,s.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",...e,children:(0,s.jsx)("path",{d:"M12 2l2.2 5.4L20 9l-5 3.8L16 20l-4-3-4 3 1-7.2L4 9l5.8-1.6L12 2Z",stroke:"currentColor",strokeWidth:"2",strokeLinejoin:"round"})})}function x(e){return(0,s.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",...e,children:(0,s.jsx)("path",{d:"M3 10.5 12 3l9 7.5V21a1 1 0 0 1-1 1h-5v-6H9v6H4a1 1 0 0 1-1-1v-10.5Z",stroke:"currentColor",strokeWidth:"2",strokeLinejoin:"round"})})}function m(e){return(0,s.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",...e,children:[(0,s.jsx)("path",{d:"M12 3l8 4-8 4-8-4 8-4Z",stroke:"currentColor",strokeWidth:"2"}),(0,s.jsx)("path",{d:"M4 11l8 4 8-4",stroke:"currentColor",strokeWidth:"2"}),(0,s.jsx)("path",{d:"M4 15l8 4 8-4",stroke:"currentColor",strokeWidth:"2"})]})}function p(e){return(0,s.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",...e,children:[(0,s.jsx)("circle",{cx:"8",cy:"8",r:"3",stroke:"currentColor",strokeWidth:"2"}),(0,s.jsx)("circle",{cx:"16",cy:"11",r:"3",stroke:"currentColor",strokeWidth:"2"}),(0,s.jsx)("path",{d:"M3 20a5 5 0 0 1 7-4.6M14 20a5 5 0 0 1 5-4",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})]})}function b(e){return(0,s.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",...e,children:[(0,s.jsx)("path",{d:"M15 3H7a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h8",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),(0,s.jsx)("path",{d:"M10 12h10M17 9l3 3-3 3",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})}function g(e){return(0,s.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",...e,children:[(0,s.jsx)("rect",{x:"3",y:"5",width:"18",height:"14",rx:"2",stroke:"currentColor",strokeWidth:"2"}),(0,s.jsx)("circle",{cx:"12",cy:"12",r:"3",stroke:"currentColor",strokeWidth:"2"})]})}function f(e){return(0,s.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",...e,children:[(0,s.jsx)("rect",{x:"2",y:"5",width:"20",height:"14",rx:"2",stroke:"currentColor",strokeWidth:"2"}),(0,s.jsx)("path",{d:"M2 10h20",stroke:"currentColor",strokeWidth:"2"}),(0,s.jsx)("rect",{x:"6",y:"14",width:"6",height:"2",rx:"1",stroke:"currentColor",strokeWidth:"2"})]})}function w(e){return(0,s.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",...e,children:(0,s.jsx)("path",{d:"M5 21V5m0 0h9l-1.5 3H19l-1.5 3H14l-1.5 3H5",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}}},function(e){e.O(0,[6933,4603,2971,2117,1744],function(){return e(e.s=57119)}),_N_E=e.O()}]);