(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7937],{69635:function(e,r,t){Promise.resolve().then(t.bind(t,14322))},99376:function(e,r,t){"use strict";var s=t(35475);t.o(s,"usePathname")&&t.d(r,{usePathname:function(){return s.usePathname}}),t.o(s,"useRouter")&&t.d(r,{useRouter:function(){return s.useRouter}}),t.o(s,"useSearchParams")&&t.d(r,{useSearchParams:function(){return s.useSearchParams}})},14322:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return l}});var s=t(57437),i=t(2265),a=t(99376),n=t(84603),o=t(71837),c=t(27648);function l(){let e=(0,a.useSearchParams)(),r=(0,a.useRouter)(),{refresh:t}=(0,n.a)(),[l,u]=(0,i.useState)("verifying"),[d,m]=(0,i.useState)("Verifying your email address..."),f=(0,i.useCallback)(async e=>{u("verifying"),m("Verifying your email address...");try{console.log("[VerifyPage] Sending token prefix ".concat(e.substring(0,10),"... to backend via /api/auth/verify"));let s=await (0,o.hi)("/api/auth/verify",{method:"POST",json:{token:e}});if((null==s?void 0:s.ok)&&(null==s?void 0:s.user))console.log("[VerifyPage] Verification successful:",s.message),u("success"),m(s.message||"Email verified successfully! Redirecting..."),await t(),setTimeout(()=>{r.push("/dashboard")},2500);else throw Error((null==s?void 0:s.message)||"Verification failed. Please try again.")}catch(e){var s,i;console.error("[VerifyPage] Verification API call failed:",e),u("error"),m((null==e?void 0:null===(i=e.response)||void 0===i?void 0:null===(s=i.data)||void 0===s?void 0:s.message)||e.message||"An error occurred during verification.")}},[t,r]);return(0,i.useEffect)(()=>{let r=e.get("token");if(!r){u("error"),m("Verification token missing in URL.");return}f(r)},[e,f]),(0,s.jsx)("div",{className:"flex min-h-screen items-center justify-center bg-gray-100 px-4 py-12",children:(0,s.jsxs)("div",{className:"w-full max-w-md space-y-8 rounded-lg bg-white p-10 shadow-md text-center",children:["verifying"===l&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"mx-auto h-12 w-12 animate-spin rounded-full border-4 border-t-4 border-gray-200 border-t-blue-600"}),(0,s.jsx)("h2",{className:"mt-6 text-2xl font-bold tracking-tight text-gray-900",children:"Verifying Your Email"}),(0,s.jsx)("p",{className:"mt-2 text-sm text-gray-600",children:d})]}),"success"===l&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("svg",{className:"mx-auto h-16 w-16 text-green-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,s.jsx)("h2",{className:"mt-6 text-2xl font-bold tracking-tight text-gray-900",children:"Verification Successful!"}),(0,s.jsx)("p",{className:"mt-2 text-sm text-gray-600",children:d})]}),"error"===l&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("svg",{className:"mx-auto h-16 w-16 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m9-.75a9 9 0 11-18 0 9 9 0 0118 0zm-9 3.75h.008v.008H12v-.008z"})}),(0,s.jsx)("h2",{className:"mt-6 text-2xl font-bold tracking-tight text-gray-900",children:"Verification Failed"}),(0,s.jsx)("p",{className:"mt-2 text-sm text-red-600",children:d}),(0,s.jsx)("p",{className:"mt-4 text-sm",children:(0,s.jsx)(c.default,{href:"/auth/signin",className:"font-medium text-blue-600 hover:text-blue-500",children:"Go back to Sign In "})})]})]})})}}},function(e){e.O(0,[6933,4603,2971,2117,1744],function(){return e(e.s=69635)}),_N_E=e.O()}]);