(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3149],{67790:function(e,a,t){Promise.resolve().then(t.bind(t,51203))},51203:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return c}});var l=t(57437),s=t(2265),i=t(27648),r=t(71837),n=t(84603);function o(e){let a=(null!=e?e:"").trim();return a?/^https?:\/\//i.test(a)?a:"https://".concat(a):""}function d(e){if(!e)return"";try{return new URL(e).toString()}catch(a){return"".concat(r.Sg).concat(e.startsWith("/")?"":"/").concat(e)}}function c(){let{user:e}=(0,n.a)(),[a,t]=(0,s.useState)(!0),[c,p]=(0,s.useState)(!1),[g,b]=(0,s.useState)(""),[v,f]=(0,s.useState)(""),[j,k]=(0,s.useState)(""),[N,w]=(0,s.useState)(""),[y,C]=(0,s.useState)(""),[S,P]=(0,s.useState)(""),[L,E]=(0,s.useState)(""),[M,I]=(0,s.useState)(void 0),[_,O]=(0,s.useState)({instagram:"",linkedin:"",twitter:"",websitePublic:"",facebook:"",youtube:""}),[U,W]=(0,s.useState)(null),D=function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Berhasil";return W({type:"ok",title:a,message:e})},G=function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Gagal";return W({type:"err",title:a,message:e})};(0,s.useEffect)(()=>{let a=!0;return(async()=>{try{var l;let t=await (0,r.hi)("/api/employers/auth/me");if(!a)return;let s=t.employer,i=(null==s?void 0:s.id)||"";if(b(i),f((null===(l=t.admin)||void 0===l?void 0:l.email)||(null==e?void 0:e.email)||""),k(((null==s?void 0:s.displayName)||(null==s?void 0:s.legalName)||"").trim()),w((null==s?void 0:s.website)||""),i){let e=await (0,r.hi)("/api/employers/profile?employerId=".concat(encodeURIComponent(i)));if(!a)return;C((null==e?void 0:e.about)||""),P((null==e?void 0:e.hqCity)||""),I((null==e?void 0:e.logoUrl)||void 0),O(a=>({...a,instagram:(null==e?void 0:e.instagram)||"",linkedin:(null==e?void 0:e.linkedin)||"",twitter:(null==e?void 0:e.twitter)||""}))}}catch(e){console.error("[profile] load failed:",e),G("Gagal memuat profil perusahaan.")}finally{a&&t(!1)}})(),()=>{a=!1}},[null==e?void 0:e.email]);let B=(0,s.useRef)(null);async function R(a){if(a&&a.type.startsWith("image/")){if(!g){I(URL.createObjectURL(a));return}I(URL.createObjectURL(a));try{let t=new FormData;t.append("employerId",g),t.append("file",a);let l=await (0,r.hF)("/api/employers/profile/logo",t);if(null==l?void 0:l.url){I(l.url);try{(null==e?void 0:e.email)&&(localStorage.setItem("ark_nav_avatar:".concat(e.email),d(l.url)),window.dispatchEvent(new Event("ark:avatar-updated")))}catch(e){}D("Logo berhasil diunggah.")}else G("Gagal menyimpan logo.")}catch(e){console.error("upload logo error:",e),G("Gagal mengunggah logo. Coba lagi.")}}}async function T(e){if(e.preventDefault(),!c){p(!0);try{if(!g)throw Error("Missing employerId");await (0,r.hi)("/api/employers/step2",{method:"POST",json:{employerId:g,about:y||void 0,hqCity:S||void 0,linkedin:o(_.linkedin)||void 0,instagram:o(_.instagram)||void 0,twitter:o(_.twitter)||void 0}});let e=o(N);await (0,r.hi)("/api/employers/update-basic",{method:"POST",json:{employerId:g,displayName:(null==j?void 0:j.trim())||void 0,website:e||null}}),D("Profil berhasil disimpan.")}catch(e){console.error("save profile error:",e),G("Gagal menyimpan profil. Periksa kembali isian Anda.")}finally{p(!1)}}}return a?(0,l.jsxs)("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 via-white to-slate-100 dark:from-slate-950 dark:via-slate-900 dark:to-slate-950",children:[(0,l.jsxs)("div",{className:"mx-auto max-w-6xl px-4 pt-10 sm:px-6 lg:px-8",children:[(0,l.jsx)("div",{className:"h-6 w-56 rounded bg-slate-200 animate-pulse dark:bg-slate-800"}),(0,l.jsx)("div",{className:"mt-2 h-4 w-96 rounded bg-slate-200 animate-pulse dark:bg-slate-800"})]}),(0,l.jsx)("main",{className:"mx-auto max-w-6xl px-4 py-10 sm:px-6 lg:px-8",children:(0,l.jsx)("div",{className:"h-40 rounded-2xl border border-slate-200 bg-white shadow-sm animate-pulse dark:border-slate-800 dark:bg-slate-900"})})]}):(0,l.jsxs)("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 via-white to-slate-100 dark:from-slate-950 dark:via-slate-900 dark:to-slate-950",children:[(0,l.jsxs)("header",{className:"mx-auto max-w-6xl px-4 pt-10 sm:px-6 lg:px-8",children:[(0,l.jsx)("h1",{className:"mb-2 text-3xl font-bold tracking-tight text-slate-900 dark:text-slate-50",children:"Profil Perusahaan"}),(0,l.jsx)("p",{className:"mb-8 max-w-2xl text-base text-slate-600 dark:text-slate-300",children:"Lengkapi informasi perusahaan Anda agar terlihat lebih profesional bagi calon kandidat."})]}),(0,l.jsx)("main",{className:"mx-auto max-w-6xl px-4 pb-24 sm:px-6 lg:px-8",children:(0,l.jsx)("form",{onSubmit:T,className:"grid grid-cols-1 gap-8",children:(0,l.jsxs)("section",{className:"space-y-8",children:[(0,l.jsx)(u,{title:"Logo Perusahaan",children:(0,l.jsxs)("div",{className:"flex items-center gap-6",children:[(0,l.jsx)("div",{className:"relative overflow-hidden rounded-2xl ring-1 ring-slate-200 dark:ring-slate-700",children:(0,l.jsx)("div",{className:"h-24 w-24 bg-slate-50 dark:bg-slate-800 grid place-items-center",children:M?(0,l.jsx)("img",{src:d(M),alt:"Logo",className:"h-full w-full object-cover"}):(0,l.jsx)("span",{className:"text-xs text-slate-500",children:"No logo"})})}),(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsxs)("label",{htmlFor:"logo-input",onDrop:function(e){var a;e.preventDefault();let t=null===(a=e.dataTransfer.files)||void 0===a?void 0:a[0];t&&R(t)},onDragOver:e=>e.preventDefault(),className:"group block cursor-pointer rounded-xl border border-dashed border-slate-300 bg-slate-50/70 px-4 py-4 text-center text-sm text-slate-600 transition hover:bg-white hover:shadow-sm dark:border-slate-700 dark:bg-slate-800/40 dark:text-slate-300",children:[(0,l.jsx)("div",{className:"mb-1 font-medium",children:"Unggah Logo"}),(0,l.jsx)("div",{className:"text-xs text-slate-500",children:"Seret & lepas berkas ke sini atau klik untuk memilih"})]}),(0,l.jsx)("input",{id:"logo-input",ref:B,type:"file",accept:"image/*",className:"sr-only",onChange:e=>{var a;let t=null===(a=e.target.files)||void 0===a?void 0:a[0];t&&R(t)}}),(0,l.jsx)("p",{className:"mt-2 text-xs text-slate-500",children:"PNG/JPG, rasio 1:1, max ~2MB."})]})]})}),(0,l.jsx)(u,{title:"Informasi Utama",children:(0,l.jsxs)("div",{className:"grid gap-5 sm:grid-cols-2",children:[(0,l.jsx)(m,{label:"Nama Perusahaan",children:(0,l.jsx)("input",{value:j,onChange:e=>k(e.target.value),className:"ui-input",placeholder:"e.g. ArkWork Indonesia, Inc."})}),(0,l.jsx)(m,{label:"Email Perusahaan (admin)",children:(0,l.jsx)("input",{value:v,readOnly:!0,className:"ui-input bg-slate-50 dark:bg-slate-800/40",placeholder:"hr@company.com"})}),(0,l.jsx)(m,{label:"Website (opsional)",children:(0,l.jsx)("input",{value:N,onChange:e=>w(e.target.value),className:"ui-input",placeholder:"company.com"})}),(0,l.jsx)(m,{className:"sm:col-span-2",label:"Tentang Perusahaan",children:(0,l.jsx)("textarea",{value:y,onChange:e=>C(e.target.value),className:"ui-input min-h-[120px]",placeholder:"Visi, misi, budaya kerja, dsb."})})]})}),(0,l.jsx)(u,{title:"Alamat Kantor",children:(0,l.jsxs)("div",{className:"grid gap-5 sm:grid-cols-2",children:[(0,l.jsx)(m,{label:"Alamat",children:(0,l.jsx)("textarea",{value:L,onChange:e=>E(e.target.value),className:"ui-input min-h-[80px]",placeholder:"Jalan, nomor, dll."})}),(0,l.jsx)(m,{label:"Kota / Kabupaten",children:(0,l.jsx)("input",{value:S,onChange:e=>P(e.target.value),className:"ui-input",placeholder:"Jakarta Selatan"})})]})}),(0,l.jsx)(u,{title:"Sosial Media",children:(0,l.jsxs)("div",{className:"grid gap-5 sm:grid-cols-2",children:[(0,l.jsx)(m,{label:"LinkedIn",children:(0,l.jsx)("input",{value:_.linkedin,onChange:e=>O({..._,linkedin:e.target.value}),className:"ui-input",placeholder:"linkedin.com/company/..."})}),(0,l.jsx)(m,{label:"Instagram",children:(0,l.jsx)("input",{value:_.instagram,onChange:e=>O({..._,instagram:e.target.value}),className:"ui-input",placeholder:"instagram.com/..."})}),(0,l.jsx)(m,{label:"Twitter/X",children:(0,l.jsx)("input",{value:_.twitter,onChange:e=>O({..._,twitter:e.target.value}),className:"ui-input",placeholder:"x.com/..."})}),(0,l.jsx)(m,{label:"Website (Publik)",children:(0,l.jsx)("input",{value:_.websitePublic,onChange:e=>O({..._,websitePublic:e.target.value}),className:"ui-input",placeholder:"https://company.com"})}),(0,l.jsx)(m,{label:"Facebook",children:(0,l.jsx)("input",{value:_.facebook,onChange:e=>O({..._,facebook:e.target.value}),className:"ui-input",placeholder:"facebook.com/..."})}),(0,l.jsx)(m,{label:"Youtube",children:(0,l.jsx)("input",{value:_.youtube,onChange:e=>O({..._,youtube:e.target.value}),className:"ui-input",placeholder:"youtube.com/@..."})})]})}),(0,l.jsxs)("div",{className:"flex flex-col-reverse gap-3 sm:flex-row sm:justify-between",children:[(0,l.jsx)(i.default,{href:"/auth/signup",className:"btn-secondary",children:"Kembali"}),(0,l.jsxs)("div",{className:"flex gap-3",children:[(0,l.jsx)("button",{type:"button",className:"btn-secondary",onClick:()=>D("Draft disimpan secara lokal (contoh)."),children:"Simpan Draft"}),(0,l.jsxs)(h,{type:"submit",loading:c,children:[(0,l.jsxs)("svg",{className:"mr-2 h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,l.jsx)("path",{d:"M19 21H5a2 2 0 0 1-2-2V7l4-4h9l4 4v12a2 2 0 0 1-2 2Z"}),(0,l.jsx)("path",{d:"M9 21v-8h6v8M9 3v4h6V3"})]}),c?"Menyimpanâ€¦":"Simpan Profil"]})]})]})]})})}),U&&(0,l.jsx)(x,{type:U.type,title:U.title,message:U.message,onClose:()=>W(null)})]})}function u(e){let{title:a,action:t,children:s}=e;return(0,l.jsxs)("div",{className:"rounded-2xl border border-slate-200/70 bg-white/80 p-6 shadow-sm backdrop-blur supports-[backdrop-filter]:bg-white/60 dark:border-slate-800/60 dark:bg-slate-900/60",children:[(a||t)&&(0,l.jsxs)("div",{className:"mb-4 flex items-center justify-between",children:[a&&(0,l.jsx)("h2",{className:"text-lg font-semibold tracking-tight text-slate-900 dark:text-slate-50",children:a}),t]}),s]})}function m(e){let{label:a,children:t,className:s}=e;return(0,l.jsxs)("label",{className:"block ".concat(null!=s?s:""),children:[(0,l.jsx)("div",{className:"mb-1 text-sm font-medium text-slate-700 dark:text-slate-200",children:a}),t]})}function h(e){let{children:a,loading:t,...s}=e;return(0,l.jsxs)("button",{...s,disabled:t||s.disabled,className:"inline-flex items-center justify-center rounded-xl px-4 py-2 text-sm font-semibold text-white shadow-sm bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-400 disabled:opacity-70 disabled:cursor-not-allowed",children:[t&&(0,l.jsxs)("svg",{className:"mr-2 h-4 w-4 animate-spin",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,l.jsx)("circle",{cx:"12",cy:"12",r:"10",className:"opacity-25"}),(0,l.jsx)("path",{d:"M12 2a10 10 0 0 1 10 10"})]}),a]})}function x(e){let{type:a,title:t="ok"===a?"Berhasil":"Gagal",message:i,onClose:r}=e;return(0,s.useEffect)(()=>{let e=e=>"Escape"===e.key&&r();return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[r]),(0,l.jsxs)("div",{className:"fixed inset-0 z-50 flex items-end sm:items-center justify-center",children:[(0,l.jsx)("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-sm",onClick:r}),(0,l.jsxs)("div",{className:"relative m-4 w-full max-w-sm translate-y-0 animate-[fadeIn_.2s_ease] rounded-2xl border border-slate-200 bg-white p-6 shadow-2xl dark:border-slate-700 dark:bg-slate-900",children:[(0,l.jsx)("div",{className:"mx-auto mb-3",children:(0,l.jsx)("ok"===a?()=>(0,l.jsx)("div",{className:"grid h-12 w-12 place-items-center rounded-full bg-emerald-100 text-emerald-600",children:(0,l.jsx)("svg",{className:"h-6 w-6",viewBox:"0 0 24 24",fill:"none",children:(0,l.jsx)("path",{d:"M5 13l4 4L19 7",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}):()=>(0,l.jsx)("div",{className:"grid h-12 w-12 place-items-center rounded-full bg-rose-100 text-rose-600",children:(0,l.jsx)("svg",{className:"h-6 w-6",viewBox:"0 0 24 24",fill:"none",children:(0,l.jsx)("path",{d:"M12 9v4M12 17h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})})}),{})}),(0,l.jsx)("h3",{className:"text-center text-lg font-semibold text-slate-900 dark:text-slate-50",children:t}),(0,l.jsx)("p",{className:"mt-2 text-center text-sm text-slate-600 dark:text-slate-300 whitespace-pre-line",children:i}),(0,l.jsxs)("div",{className:"mt-5 grid grid-cols-1 gap-2 sm:grid-cols-2",children:[(0,l.jsx)("button",{onClick:r,className:"rounded-lg border border-slate-300 bg-white px-4 py-2 text-sm font-medium text-slate-700 hover:bg-slate-50 dark:border-slate-700 dark:bg-slate-800 dark:text-slate-200 dark:hover:bg-slate-800/80",children:"Tutup"}),"ok"===a&&(0,l.jsx)("button",{onClick:r,className:"rounded-lg bg-slate-900 px-4 py-2 text-sm font-medium text-white hover:bg-slate-800",children:"Oke"})]})]})]})}}},function(e){e.O(0,[6933,4603,2971,2117,1744],function(){return e(e.s=67790)}),_N_E=e.O()}]);